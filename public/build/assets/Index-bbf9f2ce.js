import{J as y,v as A,d as v,c as K,w as L,o as r,a as t,b as k,j as P,l as U,s as W,u as x,e as c,h as B,F as N,f as w,t as a,aX as X}from"./app-a5bf5a0c.js";import{_ as G}from"./AppLayout-ebac8257.js";import{_ as H}from"./SucMesgShow-db5ea126.js";import{p as Q}from"./print-d8516359.js";import"./ApplicationLogo-066d7520.js";const R={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},Z=t("div",{class:"bg-white flex justify-between p-4"},[t("h2",{class:"float-left text-4xl font-extrabold"},"ওয়ার্ড ভিত্তিক দার্য/আদায় টপশীট")],-1),tt={class:"mt-4 mb-2 p-4 bg-white"},et={class:"mt-2 flex items-center"},at=t("label",{for:"f_year_id",class:"block min-w-[30%] text-md font-extrabold dark:text-white"},"অর্থ-বছর",-1),ot=t("option",{selected:"",value:""},"অর্থ-বছর নির্বাচন করুন",-1),nt=["value"],lt={key:0},st={key:1,id:"table"},dt={class:"bg-[#f73532c2] text-white block p-[8px] font-extrabold text-[20px] text-center h1div"},rt={id:"my-table",class:"text-center"},it={class:"bg-[yellow] p-[8px] font-extrabold text-[20px] text-center"},ct=t("thead",null,[t("tr",null,[t("th",null,"ওয়ার্ড নাম্বার"),t("th",null,"গ্রামের সংখ্যা"),t("th",null,"খানার সংখ্যা"),t("th",null,"আদায়কৃত খানার সংখ্যা "),t("th",null,"হাল ধার্য্য কর"),t("th",null,"হাল আদায়"),t("th",null,"হাল বকেয়া"),t("th",null,"পূর্বের বকেয়া "),t("th",null,"বকেয়া আদায় "),t("th",null,"সর্বমোট আদায় "),t("th",null,"সর্বমোট বকেয়া (হাল বকেয়া + পূর্বের বকেয়া)"),t("th",null,"অর্থ-বছর"),t("th",null,"আদায়ের শতকরা হার")])],-1),ut=["data-val"],_t=["data-val"],ht=["data-val"],pt=["data-val"],mt=["data-val"],xt=["data-val"],gt=["data-val"],ft=["data-val"],bt=["data-val"],yt=["data-val"],vt=["data-val"],kt=["data-val"],wt=t("th",null,"সর্বমোট",-1),Et=t("th",null,"=>>",-1),St={key:2,class:"pt-[25px] text-center"},Ct={id:"my-table",class:"text-center m-auto",style:{width:"60%"}},$t=t("caption",{class:"bg-[#030b59bd] text-white p-[8px] font-extrabold text-[20px] text-center h1div"},"চলিত অর্থ-বছরের সমস্ত আদায়ের সমষ্টি",-1),It=t("thead",null,[t("tr",null,[t("th",null,"হাল আদায়"),t("th",null,"বকেয়া আদায়"),t("th",null,"সর্বমোট আদায় (হাল আদায় + বকেয়া আদায়)")])],-1),Mt={__name:"Index",props:{f_years:Object},setup(D){y().props.auth.user;const i=A({f_year_id:""}),F=v({}),M=y().props.auth.user;y().props.permissions.forEach(function(o,n){o.module.name=="E-Khana"&&o.role_id==M.role_id&&(F.value=o)});const g=new Date;g.getMonth()+1+""+g.getDate()+g.getFullYear();const u=v({}),V=()=>{if(!i.f_year_id)return eerr.value="অর্থ-বছর নির্বাচন করুন",!1;console.log("i am form"),console.log(i),axios.post(route("ajax.ekhana.toplist.levy"),i).then(o=>{console.log(o),u.value=o.data.toplist_levy}).catch(o=>{console.error(o)}).finally(()=>{console.log("khana fetch done")})},p=v(null),q=()=>{let o=document.getElementById("f_year_id"),n=o.selectedIndex,d=o.options[n].text;p.value=d},z=()=>{Q({printable:"table",type:"html",style:"#my-table { border-collapse: collapse; width: 100%; font-size: 14px;margin-top:20px } #my-table th { background-color: #f2f2f2; color: #444; font-weight: bold; padding: 2px; text-align: left; border: 1px solid #ddd; } #my-table td { background-color: #fff; color: #444; padding: 2px; text-align: left; border: 1px solid #ddd; } #my-table tbody tr:nth-child(even) { background-color: #f2f2f2; } .h1div{font-size:40px !important; font-weight:bolder; text-align:center; margin-top:20px !important}",maxWidth:800,font:"Open Sans",honorMarginPadding:!0})},J=new Table2Excel,O=()=>{J.export(document.querySelectorAll("#my-table"))};function s(o){let n=0;return o.forEach(d=>{n+=Number(d.total_amount)}),n}function l(o){let n=0;return o.forEach(d=>{n+=Number(d.paid_amount)}),n}const E=0,S=0,C=0,$=0,_=0,f=0,b=0,h=0,T=0,Y=0,I=0,j=0;return(o,n)=>{const d=X("InputError");return r(),K(G,{title:"দার্য/আদায় টপশীট"},{default:L(()=>[t("div",R,[k(H,{message:o.$page.props.flash.suc_msg},null,8,["message"]),Z,t("div",tt,[t("form",{onSubmit:n[1]||(n[1]=P((...e)=>o.submit&&o.submit(...e),["prevent"])),class:"bg-[#008494db] text-[white] m-auto rounded-lg p-6 pb-[2px] text-2lg max-w-md max-sm:max-w-sm"},[t("div",et,[at,U(t("select",{onChange:q,id:"f_year_id","onUpdate:modelValue":n[0]||(n[0]=e=>x(i).f_year_id=e),class:"border min-w-[65%] text-[black] border-gray-300 text-md rounded-lg focus:ring-blue-500 focus:border-blue-500 block dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},[ot,(r(!0),c(N,null,B(D.f_years,(e,m)=>(r(),c("option",{value:e.id,key:m},a(e.from+"-"+e.to),9,nt))),128))],544),[[W,x(i).f_year_id]]),k(d,{class:"mt-2",message:x(i).errors.eerr},null,8,["message"]),k(d,{class:"mt-2",message:x(i).errors.f_year_id},null,8,["message"])]),t("div",{class:"flex items-center justify-center mt-8"},[t("button",{onClick:V,type:"submit",class:"text-white text-[18px] font-extrabold bg-gradient-to-r from-pink-400 via-pink-500 to-pink-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-pink-300 dark:focus:ring-pink-800 shadow-lg shadow-pink-500/50 dark:shadow-lg dark:shadow-pink-800/80 rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"},"অনুসন্ধান")])],32)]),u.value.length>0?(r(),c("div",lt,[t("button",{type:"button",onClick:n[2]||(n[2]=e=>z()),class:"text-white bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-cyan-300 dark:focus:ring-cyan-800 shadow-lg shadow-cyan-500/50 dark:shadow-lg dark:shadow-cyan-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"}," তালিকা প্রিন্ট "),t("button",{type:"button",onClick:n[3]||(n[3]=e=>O()),class:"text-white bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-cyan-300 dark:focus:ring-cyan-800 shadow-lg shadow-cyan-500/50 dark:shadow-lg dark:shadow-cyan-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"}," Excel ")])):w("",!0),u.value.length>0?(r(),c("div",st,[t("div",null,[t("h4",dt,a(o.$page.props.auth.user.word.name+" নং "+o.$page.props.auth.user.word.union.name),1)]),t("table",rt,[t("caption",it,"গ্রাম ভিত্তিক ধার্য কর ও আদায়ের টপশীট-("+a(p.value)+") - ("+a(p.value)+")",1),ct,t("tbody",null,[(r(!0),c(N,null,B(u.value,(e,m)=>(r(),c("tr",{key:m},[t("td",{"data-val":j=m+1},a(e.name),9,ut),t("td",{"data-val":E+=e.village.length},a(e.village.length),9,_t),t("td",{"data-val":S+=e.ekhana.length},a(e.ekhana.length),9,ht),t("td",{"data-val":C+=e.house_tax_paid.length},a(e.house_tax_paid.length),9,pt),t("td",{"data-val":$+=s(e.house_tax)},a(s(e.house_tax)),9,mt),t("td",{"data-val":_+=l(e.house_tax_paid)},a(l(e.house_tax_paid)),9,xt),t("td",{"data-val":f+=s(e.house_tax_unpaid)},a(s(e.house_tax_unpaid)),9,gt),t("td",{"data-val":b+=s(e.prev_tax_unpaid)},a(s(e.prev_tax_unpaid)),9,ft),t("td",{"data-val":h+=l(e.prev_tax_paid)},a(l(e.prev_tax_paid)),9,bt),t("td",{"data-val":T+=l(e.house_tax_paid)},a(l(e.house_tax_paid)),9,yt),t("td",{"data-val":Y+=s(e.house_tax_unpaid)},a(s(e.house_tax_unpaid)),9,vt),t("td",null,a(p.value),1),t("td",{"data-val":I+=l(e.house_tax_paid)/l(e.house_tax_paid)?l(e.house_tax_paid)/l(e.house_tax_paid)*100:100},a(l(e.house_tax_paid)/l(e.house_tax_paid)?l(e.house_tax_paid)/l(e.house_tax_paid)*100:100),9,kt)]))),128))]),t("tfoot",null,[t("tr",null,[wt,t("th",null,a(E)),t("th",null,a(S)),t("th",null,a(C)),t("th",null,a($)),t("th",null,a(_)),t("th",null,a(f)),t("th",null,a(h)),t("th",null,a(b)),t("th",null,a(_+h),1),t("th",null,a(f+b),1),Et,t("th",null,a(I/j),1)])])])])):w("",!0),u.value.length>0?(r(),c("div",St,[t("table",Ct,[$t,It,t("tbody",null,[t("tr",null,[t("td",null,a(_)),t("td",null,a(h)),t("td",null,a(_+h),1)])])])])):w("",!0)])]),_:1})}}};export{Mt as default};
