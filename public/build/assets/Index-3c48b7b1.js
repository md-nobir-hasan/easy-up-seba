import{J as h,v as D,d as x,c as F,w as T,o as d,a as e,b as u,j as U,l as _,s as q,u as s,e as i,h as y,F as k,H as w,f as v,t as n,aX as z,p as E}from"./app-cd57a7c3.js";import{_ as J}from"./AppLayout-cd5cf7ff.js";import{_ as O}from"./SucMesgShow-dabceb4d.js";import{p as Y}from"./print-fe94656a.js";import"./ApplicationLogo-cb0f1c28.js";const A={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},H=e("div",{class:"bg-white flex justify-between p-4"},[e("h2",{class:"float-left text-4xl font-extrabold"},"ডেইলি পোষ্টিং টপশিট")],-1),K={class:"mt-4 mb-2 p-4 bg-white"},L={class:"mt-2 flex items-center"},P=e("label",{for:"f_year_id",class:"block min-w-[30%] text-md font-extrabold dark:text-white"},"অর্থ-বছর",-1),R=e("option",{selected:"",value:""},"অর্থ-বছর নির্বাচন করুন",-1),W=["value"],X={class:"mt-2 flex items-center"},G=e("label",{for:"f_year_id",class:"block min-w-[30%] text-md font-extrabold dark:text-white"},"তারিখ",-1),Q={class:"flex min-w-[65%]"},Z={key:0},ee={key:1,id:"table"},te={class:"bg-[#f73532c2] text-white block p-[8px] font-extrabold text-[20px] text-center h1div"},oe={id:"my-table",class:"text-center"},ae={class:"bg-[yellow] p-[8px] font-extrabold text-[20px] text-center"},re=e("thead",null,[e("tr",null,[e("th",null,"ওয়ার্ড নাম্বার"),e("th",null,"খানার সংখ্যা"),e("th",null,"আদায়")])],-1),se=["data-val"],ne=["data-val"],le=e("th",null,"সর্বমোট",-1),pe={__name:"Index",props:{f_years:Object},setup(N){h().props.auth.user;const r=D({f_year_id:"",from_date:"",to_date:""}),C=x({}),S=h().props.auth.user;h().props.permissions.forEach(function(o,a){o.module.name=="E-Khana"&&o.role_id==S.role_id&&(C.value=o)});const b=new Date;b.getMonth()+1+""+b.getDate()+b.getFullYear();const c=x({}),$=()=>{if(!r.f_year_id)return eerr.value="অর্থ-বছর নির্বাচন করুন",!1;axios.post(route("ajax.ekhana.toplist.daily.posting.topsheet"),r).then(o=>{c.value=o.data.ajdata,console.log(o.data)}).catch(o=>{console.error(o)}).finally(()=>{console.log("khana fetch done")})},j=x(null),I=()=>{let o=document.getElementById("f_year_id"),a=o.selectedIndex,l=o.options[a].text;j.value=l},V=()=>{Y({printable:"table",type:"html",style:"#my-table { border-collapse: collapse; width: 100%; font-size: 14px;margin-top:20px } #my-table th { background-color: #f2f2f2; color: #444; font-weight: bold; padding: 2px; text-align: left; border: 1px solid #ddd; } #my-table td { background-color: #fff; color: #444; padding: 2px; text-align: left; border: 1px solid #ddd; } #my-table tbody tr:nth-child(even) { background-color: #f2f2f2; } .h1div{font-size:40px !important; font-weight:bolder; text-align:center; margin-top:20px !important}",maxWidth:800,font:"Open Sans",honorMarginPadding:!0})},B=new Table2Excel,M=()=>{B.export(document.querySelectorAll("#my-table"))};function f(o){let a=0;return o.forEach(l=>{a+=Number(l.paid_amount)}),a}let m=0,p=0;return(o,a)=>{const l=z("InputError");return d(),F(J,{title:"ডেইলি পোষ্টিং টপশিট"},{default:T(()=>[e("div",A,[u(O,{message:o.$page.props.flash.suc_msg},null,8,["message"]),H,e("div",K,[e("form",{onSubmit:a[3]||(a[3]=U((...t)=>o.submit&&o.submit(...t),["prevent"])),class:"bg-[#008494db] text-[white] m-auto rounded-lg p-6 pb-[2px] text-2lg max-w-md max-sm:max-w-sm"},[e("div",L,[P,_(e("select",{onChange:I,id:"f_year_id","onUpdate:modelValue":a[0]||(a[0]=t=>s(r).f_year_id=t),class:"border min-w-[65%] text-[black] border-gray-300 text-md rounded-lg focus:ring-blue-500 focus:border-blue-500 block dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},[R,(d(!0),i(k,null,y(N.f_years,(t,g)=>(d(),i("option",{value:t.id,key:g},n(t.from+"-"+t.to),9,W))),128))],544),[[q,s(r).f_year_id]]),u(l,{class:"mt-2",message:s(r).errors.eerr},null,8,["message"]),u(l,{class:"mt-2",message:s(r).errors.f_year_id},null,8,["message"])]),e("div",X,[G,e("div",Q,[_(e("input",{"onUpdate:modelValue":a[1]||(a[1]=t=>s(r).from_date=t),type:"date",class:"border mr-2 text-[black] border-gray-300 text-md rounded-lg focus:ring-blue-500 focus:border-blue-500 block dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[w,s(r).from_date]]),_(e("input",{"onUpdate:modelValue":a[2]||(a[2]=t=>s(r).to_date=t),type:"date",class:"border text-[black] border-gray-300 text-md rounded-lg focus:ring-blue-500 focus:border-blue-500 block dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[w,s(r).to_date]])]),u(l,{class:"mt-2",message:s(r).errors.eerr},null,8,["message"]),u(l,{class:"mt-2",message:s(r).errors.f_year_id},null,8,["message"])]),e("div",{class:"flex items-center justify-center mt-8"},[e("button",{onClick:$,type:"submit",class:"text-white text-[18px] font-extrabold bg-gradient-to-r from-pink-400 via-pink-500 to-pink-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-pink-300 dark:focus:ring-pink-800 shadow-lg shadow-pink-500/50 dark:shadow-lg dark:shadow-pink-800/80 rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"},"অনুসন্ধান")])],32)]),c.value.length>0?(d(),i("div",Z,[e("button",{type:"button",onClick:a[4]||(a[4]=t=>V()),class:"text-white bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-cyan-300 dark:focus:ring-cyan-800 shadow-lg shadow-cyan-500/50 dark:shadow-lg dark:shadow-cyan-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"}," তালিকা প্রিন্ট "),e("button",{type:"button",onClick:a[5]||(a[5]=t=>M()),class:"text-white bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-cyan-300 dark:focus:ring-cyan-800 shadow-lg shadow-cyan-500/50 dark:shadow-lg dark:shadow-cyan-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"}," Excel ")])):v("",!0),c.value.length>0?(d(),i("div",ee,[e("div",null,[e("h4",te,n(o.$page.props.auth.user.word.name+" নং "+o.$page.props.auth.user.word.union.name),1)]),e("table",oe,[e("caption",ae,n(s(r).from_date)+" হইতে "+n(s(r).to_date)+" তারিখের আদায়ের টপশীট",1),re,e("tbody",null,[(d(!0),i(k,null,y(c.value,(t,g)=>(d(),i("tr",{key:g},[e("td",null,n(t.name),1),e("td",{"data-val":E(m)?m.value+=Number(t.house_tax.length):m+=Number(t.house_tax.length)},n(t.house_tax.length),9,se),e("td",{"data-val":E(p)?p.value+=Number(f(t.house_tax)):p+=Number(f(t.house_tax))},n(f(t.house_tax)),9,ne)]))),128))]),e("tfoot",null,[e("tr",null,[le,e("th",null,n(s(m)),1),e("th",null,n(s(p)),1)])])])])):v("",!0)])]),_:1})}}};export{pe as default};
