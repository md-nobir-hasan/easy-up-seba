import{J as f,v as M,d as g,c as D,w as F,o as d,a as e,b as u,j as T,l as b,s as U,u as n,e as i,h as y,F as k,H as w,f as v,t as s,aX as q}from"./app-25a594f3.js";import{_ as z}from"./AppLayout-271a284a.js";import{_ as J}from"./SucMesgShow-0c58aab4.js";import{p as O}from"./print-02471209.js";import"./ApplicationLogo-81a6299b.js";const Y={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},A=e("div",{class:"bg-white flex justify-between p-4"},[e("h2",{class:"float-left text-4xl font-extrabold"},"ডেইলি পোষ্টিং টপশিট")],-1),H={class:"mt-4 mb-2 p-4 bg-white"},K={class:"mt-2 flex items-center"},L=e("label",{for:"f_year_id",class:"block min-w-[30%] text-md font-extrabold dark:text-white"},"অর্থ-বছর",-1),P=e("option",{selected:"",value:""},"অর্থ-বছর নির্বাচন করুন",-1),W=["value"],X={class:"mt-2 flex items-center"},G=e("label",{for:"f_year_id",class:"block min-w-[30%] text-md font-extrabold dark:text-white"},"তারিখ",-1),Q={class:"flex min-w-[65%]"},R={key:0},Z={key:1,id:"table"},ee={class:"bg-[#f73532c2] text-white block p-[8px] font-extrabold text-[20px] text-center h1div"},te={id:"my-table",class:"text-center"},oe={class:"bg-[yellow] p-[8px] font-extrabold text-[20px] text-center"},ae=e("thead",null,[e("tr",null,[e("th",null,"ওয়ার্ড নাম্বার"),e("th",null,"খানার সংখ্যা"),e("th",null,"আদায়")])],-1),re=["data-val"],ne=["data-val"],se=e("th",null,"সর্বমোট",-1),me={__name:"Index",props:{f_years:Object},setup(E){f().props.auth.user;const r=M({f_year_id:"",from_date:"",to_date:""}),C=g({}),S=f().props.auth.user;f().props.permissions.forEach(function(t,a){t.module.name=="E-Khana"&&t.role_id==S.role_id&&(C.value=t)});const m=new Date;m.getMonth()+1+""+m.getDate()+m.getFullYear();const c=g({}),$=()=>{if(!r.f_year_id)return eerr.value="অর্থ-বছর নির্বাচন করুন",!1;axios.post(route("ajax.ekhana.toplist.daily.posting.topsheet"),r).then(t=>{c.value=t.data.ajdata,console.log(t.data)}).catch(t=>{console.error(t)}).finally(()=>{console.log("khana fetch done")})},j=g(null),I=()=>{let t=document.getElementById("f_year_id"),a=t.selectedIndex,l=t.options[a].text;j.value=l},N=()=>{O({printable:"table",type:"html",style:"#my-table { border-collapse: collapse; width: 100%; font-size: 14px;margin-top:20px } #my-table th { background-color: #f2f2f2; color: #444; font-weight: bold; padding: 2px; text-align: left; border: 1px solid #ddd; } #my-table td { background-color: #fff; color: #444; padding: 2px; text-align: left; border: 1px solid #ddd; } #my-table tbody tr:nth-child(even) { background-color: #f2f2f2; } .h1div{font-size:40px !important; font-weight:bolder; text-align:center; margin-top:20px !important}",maxWidth:800,font:"Open Sans",honorMarginPadding:!0})},V=new Table2Excel,B=()=>{V.export(document.querySelectorAll("#my-table"))};function h(t){let a=0;return t.forEach(l=>{a+=Number(l.paid_amount)}),a}const x=0,_=0;return(t,a)=>{const l=q("InputError");return d(),D(z,{title:"ডেইলি পোষ্টিং টপশিট"},{default:F(()=>[e("div",Y,[u(J,{message:t.$page.props.flash.suc_msg},null,8,["message"]),A,e("div",H,[e("form",{onSubmit:a[3]||(a[3]=T((...o)=>t.submit&&t.submit(...o),["prevent"])),class:"bg-[#008494db] text-[white] m-auto rounded-lg p-6 pb-[2px] text-2lg max-w-md max-sm:max-w-sm"},[e("div",K,[L,b(e("select",{onChange:I,id:"f_year_id","onUpdate:modelValue":a[0]||(a[0]=o=>n(r).f_year_id=o),class:"border min-w-[65%] text-[black] border-gray-300 text-md rounded-lg focus:ring-blue-500 focus:border-blue-500 block dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},[P,(d(!0),i(k,null,y(E.f_years,(o,p)=>(d(),i("option",{value:o.id,key:p},s(o.from+"-"+o.to),9,W))),128))],544),[[U,n(r).f_year_id]]),u(l,{class:"mt-2",message:n(r).errors.eerr},null,8,["message"]),u(l,{class:"mt-2",message:n(r).errors.f_year_id},null,8,["message"])]),e("div",X,[G,e("div",Q,[b(e("input",{"onUpdate:modelValue":a[1]||(a[1]=o=>n(r).from_date=o),type:"date",class:"border mr-2 text-[black] border-gray-300 text-md rounded-lg focus:ring-blue-500 focus:border-blue-500 block dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[w,n(r).from_date]]),b(e("input",{"onUpdate:modelValue":a[2]||(a[2]=o=>n(r).to_date=o),type:"date",class:"border text-[black] border-gray-300 text-md rounded-lg focus:ring-blue-500 focus:border-blue-500 block dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[w,n(r).to_date]])]),u(l,{class:"mt-2",message:n(r).errors.eerr},null,8,["message"]),u(l,{class:"mt-2",message:n(r).errors.f_year_id},null,8,["message"])]),e("div",{class:"flex items-center justify-center mt-8"},[e("button",{onClick:$,type:"submit",class:"text-white text-[18px] font-extrabold bg-gradient-to-r from-pink-400 via-pink-500 to-pink-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-pink-300 dark:focus:ring-pink-800 shadow-lg shadow-pink-500/50 dark:shadow-lg dark:shadow-pink-800/80 rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"},"অনুসন্ধান")])],32)]),c.value.length>0?(d(),i("div",R,[e("button",{type:"button",onClick:a[4]||(a[4]=o=>N()),class:"text-white bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-cyan-300 dark:focus:ring-cyan-800 shadow-lg shadow-cyan-500/50 dark:shadow-lg dark:shadow-cyan-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"}," তালিকা প্রিন্ট "),e("button",{type:"button",onClick:a[5]||(a[5]=o=>B()),class:"text-white bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-cyan-300 dark:focus:ring-cyan-800 shadow-lg shadow-cyan-500/50 dark:shadow-lg dark:shadow-cyan-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"}," Excel ")])):v("",!0),c.value.length>0?(d(),i("div",Z,[e("div",null,[e("h4",ee,s(t.$page.props.auth.user.word.name+" নং "+t.$page.props.auth.user.word.union.name),1)]),e("table",te,[e("caption",oe,s(n(r).from_date)+" হইতে "+s(n(r).to_date)+" তারিখের আদায়ের টপশীট",1),ae,e("tbody",null,[(d(!0),i(k,null,y(c.value,(o,p)=>(d(),i("tr",{key:p},[e("td",null,s(o.name),1),e("td",{"data-val":x+=Number(o.house_tax.length)},s(o.house_tax.length),9,re),e("td",{"data-val":_+=Number(h(o.house_tax))},s(h(o.house_tax)),9,ne)]))),128))]),e("tfoot",null,[e("tr",null,[se,e("th",null,s(x)),e("th",null,s(_))])])])])):v("",!0)])]),_:1})}}};export{me as default};
