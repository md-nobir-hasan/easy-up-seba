import{J as F,v as W,d as M,c as X,w as G,o as u,a as t,b as V,j as H,l as Q,s as Z,u as a,e as c,h as T,t as l,F as q,f as P,p as d,aX as tt}from"./app-0416fd4d.js";import{_ as et}from"./AppLayout-21b32a86.js";import{_ as at}from"./SucMesgShow-b87cdc2a.js";import{p as ot}from"./print-a6ca9d7d.js";import"./ApplicationLogo-75446e96.js";const nt={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},lt=t("div",{class:"bg-white flex justify-between p-4"},[t("h2",{class:"float-left text-4xl font-extrabold"},"ওয়ার্ড ভিত্তিক দার্য/আদায় টপশীট")],-1),st={class:"mt-4 mb-2 p-4 bg-white"},rt={class:"mt-2 flex items-center"},dt=t("label",{for:"f_year_id",class:"block min-w-[30%] text-md font-extrabold dark:text-white"},"অর্থ-বছর",-1),ut=t("option",{selected:"",value:""},"অর্থ-বছর নির্বাচন করুন",-1),it=["value"],ht={key:0},ct={key:1,id:"table"},_t={class:"bg-[#f73532c2] text-white block p-[8px] font-extrabold text-[20px] text-center h1div"},mt={id:"my-table",class:"text-center"},pt={class:"bg-[yellow] p-[8px] font-extrabold text-[20px] text-center"},xt=t("thead",null,[t("tr",null,[t("th",null,"ওয়ার্ড নাম্বার"),t("th",null,"গ্রামের সংখ্যা"),t("th",null,"খানার সংখ্যা"),t("th",null,"আদায়কৃত খানার সংখ্যা "),t("th",null,"হাল ধার্য্য কর"),t("th",null,"হাল আদায়"),t("th",null,"হাল বকেয়া"),t("th",null,"পূর্বের বকেয়া "),t("th",null,"বকেয়া আদায় "),t("th",null,"সর্বমোট আদায় "),t("th",null,"সর্বমোট বকেয়া (হাল বকেয়া + পূর্বের বকেয়া)"),t("th",null,"অর্থ-বছর"),t("th",null,"আদায়ের শতকরা হার")])],-1),bt=["data-val"],gt=["data-val"],ft=["data-val"],yt=["data-val"],kt=["data-val"],vt=["data-val"],wt=["data-val"],Nt=["data-val"],Et=["data-val"],Ct=["data-val"],St=["data-value","data-val"],$t={key:1},Bt=t("th",null,"সর্বমোট",-1),It=t("th",null,"=>>",-1),jt={key:2,class:"pt-[25px] text-center"},At={id:"my-table",class:"text-center m-auto",style:{width:"60%"}},Dt=t("caption",{class:"bg-[#030b59bd] text-white p-[8px] font-extrabold text-[20px] text-center h1div"},"চলিত অর্থ-বছরের সমস্ত আদায়ের সমষ্টি",-1),Ft=t("thead",null,[t("tr",null,[t("th",null,"হাল আদায়"),t("th",null,"বকেয়া আদায়"),t("th",null,"সর্বমোট আদায় (হাল আদায় + বকেয়া আদায়)")])],-1),zt={__name:"Index",props:{f_years:Object},setup(z){F().props.auth.user;const _=W({f_year_id:""});let s=o=>String(o).replace(/\d/g,n=>"০১২৩৪৫৬৭৮৯"[n]);const J=M({}),O=F().props.auth.user;F().props.permissions.forEach(function(o,n){o.module.name=="E-Khana"&&o.role_id==O.role_id&&(J.value=o)});const S=new Date;S.getMonth()+1+""+S.getDate()+S.getFullYear();const g=M({}),Y=()=>{if(!_.f_year_id)return eerr.value="অর্থ-বছর নির্বাচন করুন",!1;console.log("i am form"),console.log(_),axios.post(route("ajax.ekhana.toplist.levy"),_).then(o=>{console.log(o),g.value=o.data.toplist_levy}).catch(o=>{console.error(o)}).finally(()=>{console.log("khana fetch done")})},$=M(null),K=()=>{let o=document.getElementById("f_year_id"),n=o.selectedIndex,r=o.options[n].text;$.value=r},L=()=>{ot({printable:"table",type:"html",style:"#my-table { border-collapse: collapse; width: 100%; font-size: 14px;margin-top:20px } #my-table th { background-color: #f2f2f2; color: #444; font-weight: bold; padding: 2px; text-align: left; border: 1px solid #ddd; } #my-table td { background-color: #fff; color: #444; padding: 2px; text-align: left; border: 1px solid #ddd; } #my-table tbody tr:nth-child(even) { background-color: #f2f2f2; } .h1div{font-size:40px !important; font-weight:bolder; text-align:center; margin-top:20px !important}",maxWidth:800,font:"Open Sans",honorMarginPadding:!0})},R=new Table2Excel,U=()=>{R.export(document.querySelectorAll("#my-table"))};function x(o){let n=0;return o.forEach(r=>{n+=Number(r.total_amount)}),n}function B(o){let n=0;return o.forEach(r=>{n+=Number(r.total_amount)-Number(r.paid_amount)}),n}function b(o){let n=0;return o.forEach(r=>{n+=Number(r.prev_arrears)}),n}function i(o){let n=0;return o.forEach(r=>{n+=Number(r.paid_prev_arrears)}),n}function I(o){let n=0;return o.forEach(r=>{n+=Number(r.total_amount)+Number(r.prev_arrears)}),n}function h(o){let n=0;return o.forEach(r=>{n+=Number(r.paid_amount)}),n}let k=0,v=0,w=0,N=0,m=0,f=0,y=0,p=0,j=0,A=0,E=0,C=0;return(o,n)=>{const r=tt("InputError");return u(),X(et,{title:"দার্য/আদায় টপশীট"},{default:G(()=>[t("div",nt,[V(at,{message:o.$page.props.flash.suc_msg},null,8,["message"]),lt,t("div",st,[t("form",{onSubmit:n[1]||(n[1]=H((...e)=>o.submit&&o.submit(...e),["prevent"])),class:"bg-[#008494db] text-[white] m-auto rounded-lg p-6 pb-[2px] text-2lg max-w-md max-sm:max-w-sm"},[t("div",rt,[dt,Q(t("select",{onChange:K,id:"f_year_id","onUpdate:modelValue":n[0]||(n[0]=e=>a(_).f_year_id=e),class:"border min-w-[65%] text-[black] border-gray-300 text-md rounded-lg focus:ring-blue-500 focus:border-blue-500 block dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},[ut,(u(!0),c(q,null,T(z.f_years,(e,D)=>(u(),c("option",{value:e.id,key:D},l(a(s)(e.from)+"-"+a(s)(e.to)),9,it))),128))],544),[[Z,a(_).f_year_id]]),V(r,{class:"mt-2",message:a(_).errors.eerr},null,8,["message"]),V(r,{class:"mt-2",message:a(_).errors.f_year_id},null,8,["message"])]),t("div",{class:"flex items-center justify-center mt-8"},[t("button",{onClick:Y,type:"submit",class:"text-white text-[18px] font-extrabold bg-gradient-to-r from-pink-400 via-pink-500 to-pink-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-pink-300 dark:focus:ring-pink-800 shadow-lg shadow-pink-500/50 dark:shadow-lg dark:shadow-pink-800/80 rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"},"অনুসন্ধান")])],32)]),g.value.length>0?(u(),c("div",ht,[t("button",{type:"button",onClick:n[2]||(n[2]=e=>L()),class:"text-white bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-cyan-300 dark:focus:ring-cyan-800 shadow-lg shadow-cyan-500/50 dark:shadow-lg dark:shadow-cyan-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"}," তালিকা প্রিন্ট "),t("button",{type:"button",onClick:n[3]||(n[3]=e=>U()),class:"text-white bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-cyan-300 dark:focus:ring-cyan-800 shadow-lg shadow-cyan-500/50 dark:shadow-lg dark:shadow-cyan-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"}," Excel ")])):P("",!0),g.value.length>0?(u(),c("div",ct,[t("div",null,[t("h4",_t,l(a(s)(o.$page.props.auth.user.word.name)+" নং "+o.$page.props.auth.user.word.union.name),1)]),t("table",mt,[t("caption",pt,"ওয়ার্ড ভিত্তিক ধার্য কর ও আদায়ের টপশীট-("+l($.value)+")",1),xt,t("tbody",null,[(u(!0),c(q,null,T(g.value,(e,D)=>(u(),c("tr",{key:D},[t("td",null,l(a(s)(e.name)),1),t("td",{"data-val":d(k)?k.value+=e.village.length:k+=e.village.length},l(a(s)(e.village.length)),9,bt),t("td",{"data-val":d(v)?v.value+=e.ekhana.length:v+=e.ekhana.length},l(a(s)(e.ekhana.length)),9,gt),t("td",{"data-val":d(w)?w.value+=e.house_tax_paid.length:w+=e.house_tax_paid.length},l(a(s)(e.house_tax_paid.length)),9,ft),t("td",{"data-val":d(N)?N.value+=x(e.house_tax):N+=x(e.house_tax)},l(a(s)(x(e.house_tax))),9,yt),t("td",{"data-val":d(m)?m.value+=h(e.house_tax):m+=h(e.house_tax)},l(a(s)(h(e.house_tax))),9,kt),t("td",{"data-val":d(f)?f.value+=B(e.house_tax):f+=B(e.house_tax)},l(a(s)(B(e.house_tax))),9,vt),t("td",{"data-val":d(y)?y.value+=b(e.house_tax):y+=b(e.house_tax)},l(a(s)(b(e.house_tax))),9,wt),t("td",{"data-val":d(p)?p.value+=i(e.house_tax):p+=i(e.house_tax)},l(a(s)(i(e.house_tax))),9,Nt),t("td",{"data-val":d(j)?j.value+=h(e.house_tax)+Number(i(e.house_tax)):j+=h(e.house_tax)+Number(i(e.house_tax))},l(a(s)(h(e.house_tax)+Number(i(e.house_tax)))),9,Et),t("td",{"data-val":d(A)?A.value+=I(e.house_tax):A+=I(e.house_tax)},l(a(s)(I(e.house_tax))),9,Ct),t("td",null,l($.value),1),t("td",null,[e.house_tax.length?(u(),c("span",{key:0,"data-value":d(C)?C.value+=1:C+=1,"data-val":d(E)?E.value+=Number(h(e.house_tax)+Number(i(e.house_tax)))/(Number(x(e.house_tax))+Number(b(e.house_tax))):E+=Number(h(e.house_tax)+Number(i(e.house_tax)))/(Number(x(e.house_tax))+Number(b(e.house_tax)))},l(a(s)(Number(h(e.house_tax)+Number(i(e.house_tax)))/(Number(x(e.house_tax))+Number(b(e.house_tax)))*100)),9,St)):(u(),c("span",$t,"০"))])]))),128))]),t("tfoot",null,[t("tr",null,[Bt,t("th",null,l(a(s)(a(k))),1),t("th",null,l(a(s)(a(v))),1),t("th",null,l(a(s)(a(w))),1),t("th",null,l(a(s)(a(N))),1),t("th",null,l(a(s)(a(m))),1),t("th",null,l(a(s)(a(f))),1),t("th",null,l(a(s)(a(p))),1),t("th",null,l(a(s)(a(y))),1),t("th",null,l(a(s)(a(m)+a(p))),1),t("th",null,l(a(s)(a(f)+a(y))),1),It,t("th",null,l(a(s)(a(E)/a(C)*100)),1)])])])])):P("",!0),g.value.length>0?(u(),c("div",jt,[t("table",At,[Dt,Ft,t("tbody",null,[t("tr",null,[t("td",null,l(a(s)(a(m))),1),t("td",null,l(a(s)(a(p))),1),t("td",null,l(a(s)(a(m)+a(p))),1)])])])])):P("",!0)])]),_:1})}}};export{zt as default};
