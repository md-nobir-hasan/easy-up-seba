import{J as j,v as K,d as B,c as L,w as P,o as _,a as t,b as N,j as R,l as U,s as W,u as o,e as p,h as F,t as a,F as M,f as D,p as r,aX as X}from"./app-6043c683.js";import{_ as G}from"./AppLayout-6c5fb68f.js";import{_ as H}from"./SucMesgShow-68041770.js";import{p as Q}from"./print-6fc9c3b9.js";import"./ApplicationLogo-a483ba9e.js";const Z={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},tt=t("div",{class:"bg-white flex justify-between p-4"},[t("h2",{class:"float-left text-4xl font-extrabold"},"ওয়ার্ড ভিত্তিক দার্য/আদায় টপশীট")],-1),et={class:"mt-4 mb-2 p-4 bg-white"},at={class:"mt-2 flex items-center"},ot=t("label",{for:"f_year_id",class:"block min-w-[30%] text-md font-extrabold dark:text-white"},"অর্থ-বছর",-1),nt=t("option",{selected:"",value:""},"অর্থ-বছর নির্বাচন করুন",-1),lt=["value"],st={key:0},dt={key:1,id:"table"},rt={class:"bg-[#f73532c2] text-white block p-[8px] font-extrabold text-[20px] text-center h1div"},it={id:"my-table",class:"text-center"},_t={class:"bg-[yellow] p-[8px] font-extrabold text-[20px] text-center"},ut=t("thead",null,[t("tr",null,[t("th",null,"ওয়ার্ড নাম্বার"),t("th",null,"গ্রামের সংখ্যা"),t("th",null,"খানার সংখ্যা"),t("th",null,"আদায়কৃত খানার সংখ্যা "),t("th",null,"হাল ধার্য্য কর"),t("th",null,"হাল আদায়"),t("th",null,"হাল বকেয়া"),t("th",null,"পূর্বের বকেয়া "),t("th",null,"বকেয়া আদায় "),t("th",null,"সর্বমোট আদায় "),t("th",null,"সর্বমোট বকেয়া (হাল বকেয়া + পূর্বের বকেয়া)"),t("th",null,"অর্থ-বছর"),t("th",null,"আদায়ের শতকরা হার")])],-1),ht=["data-val"],ct=["data-val"],pt=["data-val"],xt=["data-val"],mt=["data-val"],gt=["data-val"],ft=["data-val"],bt=["data-val"],yt=["data-val"],vt=["data-val"],kt=["data-val"],wt=["data-val"],Et=t("th",null,"সর্বমোট",-1),St=t("th",null,"=>>",-1),Ct={key:2,class:"pt-[25px] text-center"},$t={id:"my-table",class:"text-center m-auto",style:{width:"60%"}},It=t("caption",{class:"bg-[#030b59bd] text-white p-[8px] font-extrabold text-[20px] text-center h1div"},"চলিত অর্থ-বছরের সমস্ত আদায়ের সমষ্টি",-1),jt=t("thead",null,[t("tr",null,[t("th",null,"হাল আদায়"),t("th",null,"বকেয়া আদায়"),t("th",null,"সর্বমোট আদায় (হাল আদায় + বকেয়া আদায়)")])],-1),Vt={__name:"Index",props:{f_years:Object},setup(V){j().props.auth.user;const u=K({f_year_id:""}),q=B({}),z=j().props.auth.user;j().props.permissions.forEach(function(l,s){l.module.name=="E-Khana"&&l.role_id==z.role_id&&(q.value=l)});const S=new Date;S.getMonth()+1+""+S.getDate()+S.getFullYear();const x=B({}),J=()=>{if(!u.f_year_id)return eerr.value="অর্থ-বছর নির্বাচন করুন",!1;console.log("i am form"),console.log(u),axios.post(route("ajax.ekhana.toplist.levy"),u).then(l=>{console.log(l),x.value=l.data.toplist_levy}).catch(l=>{console.error(l)}).finally(()=>{console.log("khana fetch done")})},C=B(null),O=()=>{let l=document.getElementById("f_year_id"),s=l.selectedIndex,i=l.options[s].text;C.value=i},T=()=>{Q({printable:"table",type:"html",style:"#my-table { border-collapse: collapse; width: 100%; font-size: 14px;margin-top:20px } #my-table th { background-color: #f2f2f2; color: #444; font-weight: bold; padding: 2px; text-align: left; border: 1px solid #ddd; } #my-table td { background-color: #fff; color: #444; padding: 2px; text-align: left; border: 1px solid #ddd; } #my-table tbody tr:nth-child(even) { background-color: #f2f2f2; } .h1div{font-size:40px !important; font-weight:bolder; text-align:center; margin-top:20px !important}",maxWidth:800,font:"Open Sans",honorMarginPadding:!0})},Y=new Table2Excel,A=()=>{Y.export(document.querySelectorAll("#my-table"))};function d(l){let s=0;return l.forEach(i=>{s+=Number(i.total_amount)}),s}function n(l){let s=0;return l.forEach(i=>{s+=Number(i.paid_amount)}),s}let b=0,y=0,v=0,k=0,h=0,m=0,g=0,c=0,$=0,I=0,w=0,E=0;return(l,s)=>{const i=X("InputError");return _(),L(G,{title:"দার্য/আদায় টপশীট"},{default:P(()=>[t("div",Z,[N(H,{message:l.$page.props.flash.suc_msg},null,8,["message"]),tt,t("div",et,[t("form",{onSubmit:s[1]||(s[1]=R((...e)=>l.submit&&l.submit(...e),["prevent"])),class:"bg-[#008494db] text-[white] m-auto rounded-lg p-6 pb-[2px] text-2lg max-w-md max-sm:max-w-sm"},[t("div",at,[ot,U(t("select",{onChange:O,id:"f_year_id","onUpdate:modelValue":s[0]||(s[0]=e=>o(u).f_year_id=e),class:"border min-w-[65%] text-[black] border-gray-300 text-md rounded-lg focus:ring-blue-500 focus:border-blue-500 block dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},[nt,(_(!0),p(M,null,F(V.f_years,(e,f)=>(_(),p("option",{value:e.id,key:f},a(e.from+"-"+e.to),9,lt))),128))],544),[[W,o(u).f_year_id]]),N(i,{class:"mt-2",message:o(u).errors.eerr},null,8,["message"]),N(i,{class:"mt-2",message:o(u).errors.f_year_id},null,8,["message"])]),t("div",{class:"flex items-center justify-center mt-8"},[t("button",{onClick:J,type:"submit",class:"text-white text-[18px] font-extrabold bg-gradient-to-r from-pink-400 via-pink-500 to-pink-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-pink-300 dark:focus:ring-pink-800 shadow-lg shadow-pink-500/50 dark:shadow-lg dark:shadow-pink-800/80 rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"},"অনুসন্ধান")])],32)]),x.value.length>0?(_(),p("div",st,[t("button",{type:"button",onClick:s[2]||(s[2]=e=>T()),class:"text-white bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-cyan-300 dark:focus:ring-cyan-800 shadow-lg shadow-cyan-500/50 dark:shadow-lg dark:shadow-cyan-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"}," তালিকা প্রিন্ট "),t("button",{type:"button",onClick:s[3]||(s[3]=e=>A()),class:"text-white bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-cyan-300 dark:focus:ring-cyan-800 shadow-lg shadow-cyan-500/50 dark:shadow-lg dark:shadow-cyan-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"}," Excel ")])):D("",!0),x.value.length>0?(_(),p("div",dt,[t("div",null,[t("h4",rt,a(l.$page.props.auth.user.word.name+" নং "+l.$page.props.auth.user.word.union.name),1)]),t("table",it,[t("caption",_t,"ওয়ার্ড ভিত্তিক ধার্য কর ও আদায়ের টপশীট-("+a(C.value)+")",1),ut,t("tbody",null,[(_(!0),p(M,null,F(x.value,(e,f)=>(_(),p("tr",{key:f},[t("td",{"data-val":r(E)?E.value=f+1:E=f+1},a(e.name),9,ht),t("td",{"data-val":r(b)?b.value+=e.village.length:b+=e.village.length},a(e.village.length),9,ct),t("td",{"data-val":r(y)?y.value+=e.ekhana.length:y+=e.ekhana.length},a(e.ekhana.length),9,pt),t("td",{"data-val":r(v)?v.value+=e.house_tax_paid.length:v+=e.house_tax_paid.length},a(e.house_tax_paid.length),9,xt),t("td",{"data-val":r(k)?k.value+=d(e.house_tax):k+=d(e.house_tax)},a(d(e.house_tax)),9,mt),t("td",{"data-val":r(h)?h.value+=n(e.house_tax_paid):h+=n(e.house_tax_paid)},a(n(e.house_tax_paid)),9,gt),t("td",{"data-val":r(m)?m.value+=d(e.house_tax_unpaid):m+=d(e.house_tax_unpaid)},a(d(e.house_tax_unpaid)),9,ft),t("td",{"data-val":r(g)?g.value+=d(e.prev_tax_unpaid):g+=d(e.prev_tax_unpaid)},a(d(e.prev_tax_unpaid)),9,bt),t("td",{"data-val":r(c)?c.value+=n(e.prev_tax_paid):c+=n(e.prev_tax_paid)},a(n(e.prev_tax_paid)),9,yt),t("td",{"data-val":r($)?$.value+=n(e.house_tax_paid):$+=n(e.house_tax_paid)},a(n(e.house_tax_paid)),9,vt),t("td",{"data-val":r(I)?I.value+=d(e.house_tax_unpaid):I+=d(e.house_tax_unpaid)},a(d(e.house_tax_unpaid)),9,kt),t("td",null,a(C.value),1),t("td",{"data-val":r(w)?w.value+=n(e.house_tax_paid)/n(e.house_tax_paid)?n(e.house_tax_paid)/n(e.house_tax_paid)*100:100:w+=n(e.house_tax_paid)/n(e.house_tax_paid)?n(e.house_tax_paid)/n(e.house_tax_paid)*100:100},a(n(e.house_tax_paid)/n(e.house_tax_paid)?n(e.house_tax_paid)/n(e.house_tax_paid)*100:100),9,wt)]))),128))]),t("tfoot",null,[t("tr",null,[Et,t("th",null,a(o(b)),1),t("th",null,a(o(y)),1),t("th",null,a(o(v)),1),t("th",null,a(o(k)),1),t("th",null,a(o(h)),1),t("th",null,a(o(m)),1),t("th",null,a(o(c)),1),t("th",null,a(o(g)),1),t("th",null,a(o(h)+o(c)),1),t("th",null,a(o(m)+o(g)),1),St,t("th",null,a(o(w)/o(E)),1)])])])])):D("",!0),x.value.length>0?(_(),p("div",Ct,[t("table",$t,[It,jt,t("tbody",null,[t("tr",null,[t("td",null,a(o(h)),1),t("td",null,a(o(c)),1),t("td",null,a(o(h)+o(c)),1)])])])])):D("",!0)])]),_:1})}}};export{Vt as default};
