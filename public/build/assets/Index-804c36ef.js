import{J as p,v as B,d as x,c as N,w as D,o as s,a as t,b as _,j as F,l as M,s as V,u as m,e as i,h as b,F as y,f as k,t as a,aX as q}from"./app-9c630eda.js";import{_ as z}from"./AppLayout-4a0e9145.js";import{_ as J}from"./SucMesgShow-a5860b52.js";import{p as O}from"./print-bb9f829a.js";import"./ApplicationLogo-22bb4af1.js";const T={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},Y=t("div",{class:"bg-white flex justify-between p-4"},[t("h2",{class:"float-left text-4xl font-extrabold"},"গ্রাম ভিত্তিক ধার্য")],-1),A={class:"mt-4 mb-2 p-4 bg-white"},K={class:"mt-2 flex items-center"},L=t("label",{for:"f_year_id",class:"block min-w-[30%] text-md font-extrabold dark:text-white"},"অর্থ-বছর",-1),P=t("option",{selected:"",value:""},"অর্থ-বছর নির্বাচন করুন",-1),U=["value"],W={key:0},X={key:1,id:"table"},G={class:"bg-[#f73532c2] text-white block p-[8px] font-extrabold text-[20px] text-center h1div"},H={id:"my-table",class:"text-center"},Q={class:"bg-[yellow] p-[8px] font-extrabold text-[20px] text-center h1div"},R=t("thead",null,[t("tr",null,[t("th",null,"ওয়ার্ড নাম্বার"),t("th",null,"গ্রামের সংখ্যা"),t("th",null,"খানার সংখ্যা"),t("th",null,"আদায়কৃত খানার সংখ্যা "),t("th",null,"হাল ধার্য্য কর"),t("th",null,"হাল আদায়"),t("th",null,"হাল বকেয়া"),t("th",null,"পূর্বের বকেয়া "),t("th",null,"বকেয়া আদায় "),t("th",null,"সর্বমোট আদায় "),t("th",null,"সর্বমোট বকেয়া"),t("th",null,"অর্থ-বছর"),t("th",null,"আদায়ের শতকরা হার")])],-1),Z=t("td",null,"0n",-1),tt=t("td",null,"0n",-1),rt={__name:"Index",props:{f_years:Object},setup(w){p().props.auth.user;const r=B({f_year_id:""}),v=x({}),E=p().props.auth.user;p().props.permissions.forEach(function(o,n){o.module.name=="E-Khana"&&o.role_id==E.role_id&&(v.value=o)});const h=new Date;h.getMonth()+1+""+h.getDate()+h.getFullYear();const u=x({}),S=()=>{if(!r.f_year_id)return eerr.value="অর্থ-বছর নির্বাচন করুন",!1;console.log("i am form"),console.log(r),axios.post(route("ajax.ekhana.toplist.levy"),r).then(o=>{console.log(o),u.value=o.data.toplist_levy}).catch(o=>{console.error(o)}).finally(()=>{console.log("khana fetch done")})},c=x(null),C=()=>{let o=document.getElementById("f_year_id"),n=o.selectedIndex,l=o.options[n].text;c.value=l},$=()=>{O({printable:"table",type:"html",style:"#my-table { border-collapse: collapse; width: 100%; font-size: 14px;margin-top:20px } #my-table th { background-color: #f2f2f2; color: #444; font-weight: bold; padding: 2px; text-align: left; border: 1px solid #ddd; } #my-table td { background-color: #fff; color: #444; padding: 2px; text-align: left; border: 1px solid #ddd; } #my-table tbody tr:nth-child(even) { background-color: #f2f2f2; } .h1div{font-size:40px !important; font-weight:bolder; text-align:center; margin-top:20px !important}",maxWidth:800,font:"Open Sans",honorMarginPadding:!0})},I=new Table2Excel,j=()=>{I.export(document.querySelectorAll("#my-table"))};function f(o){let n=0;return o.forEach(l=>{n+=Number(l.total_amount)}),n}function d(o){let n=0;return o.forEach(l=>{n+=Number(l.paid_amount)}),n}return console.log(p().props.auth.user),(o,n)=>{const l=q("InputError");return s(),N(z,{title:"গ্রাম ভিত্তিক ধার্য"},{default:D(()=>[t("div",T,[_(J,{message:o.$page.props.flash.suc_msg},null,8,["message"]),Y,t("div",A,[t("form",{onSubmit:n[1]||(n[1]=F((...e)=>o.submit&&o.submit(...e),["prevent"])),class:"bg-[#008494db] text-[white] m-auto rounded-lg p-6 pb-[2px] text-2lg max-w-md max-sm:max-w-sm"},[t("div",K,[L,M(t("select",{onChange:C,id:"f_year_id","onUpdate:modelValue":n[0]||(n[0]=e=>m(r).f_year_id=e),class:"border min-w-[65%] text-[black] border-gray-300 text-md rounded-lg focus:ring-blue-500 focus:border-blue-500 block dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},[P,(s(!0),i(y,null,b(w.f_years,(e,g)=>(s(),i("option",{value:e.id,key:g},a(e.from+"-"+e.to),9,U))),128))],544),[[V,m(r).f_year_id]]),_(l,{class:"mt-2",message:m(r).errors.eerr},null,8,["message"]),_(l,{class:"mt-2",message:m(r).errors.f_year_id},null,8,["message"])]),t("div",{class:"flex items-center justify-center mt-8"},[t("button",{onClick:S,type:"submit",class:"text-white text-[18px] font-extrabold bg-gradient-to-r from-pink-400 via-pink-500 to-pink-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-pink-300 dark:focus:ring-pink-800 shadow-lg shadow-pink-500/50 dark:shadow-lg dark:shadow-pink-800/80 rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"},"অনুসন্ধান")])],32)]),u.value.length>0?(s(),i("div",W,[t("button",{type:"button",onClick:n[2]||(n[2]=e=>$()),class:"text-white bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-cyan-300 dark:focus:ring-cyan-800 shadow-lg shadow-cyan-500/50 dark:shadow-lg dark:shadow-cyan-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"}," তালিকা প্রিন্ট "),t("button",{type:"button",onClick:n[3]||(n[3]=e=>j()),class:"text-white bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-cyan-300 dark:focus:ring-cyan-800 shadow-lg shadow-cyan-500/50 dark:shadow-lg dark:shadow-cyan-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"}," Excel ")])):k("",!0),u.value.length>0?(s(),i("div",X,[t("div",null,[t("h4",G,a(o.$page.props.auth.user.word.name+" নং "+o.$page.props.auth.user.word.union.name),1)]),t("table",H,[t("caption",Q,"গ্রাম ভিত্তিক ধার্য কর ও আদায়ের টপশীট-("+a(c.value)+") - ("+a(c.value)+")",1),R,t("tbody",null,[(s(!0),i(y,null,b(u.value,(e,g)=>(s(),i("tr",{key:g},[t("td",null,a(e.name),1),t("td",null,a(e.village.length),1),t("td",null,a(e.ekhana.length),1),t("td",null,a(e.house_tax_paid.length),1),t("td",null,a(f(e.house_tax)),1),t("td",null,a(d(e.house_tax_paid)),1),t("td",null,a(f(e.house_tax_unpaid)),1),Z,tt,t("td",null,a(d(e.house_tax_paid)),1),t("td",null,a(f(e.house_tax_unpaid)),1),t("td",null,a(c.value),1),t("td",null,a(d(e.house_tax_paid)/d(e.house_tax_paid)?d(e.house_tax_paid)/d(e.house_tax_paid)*100:100),1)]))),128))])])])):k("",!0)])]),_:1})}}};export{rt as default};
