import{v as V,d as m,J as D,c as j,w as x,o as d,a as e,b as u,i as I,l as b,s as U,u as o,e as c,h as E,F as T,g as w,n as _,t as p,H as h,aZ as M,f as O,aX as z}from"./app-c8674fba.js";import{_ as J,C as K}from"./AppLayout-2a74d685.js";import{_ as L}from"./SucMesgShow-76f9c6bd.js";import{_ as v}from"./PrimaryButton-6b4bbc7d.js";import"./ApplicationLogo-f29ee196.js";import"./AuthenticationCardLogo-359d142d.js";const X={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},Y=e("div",{class:"bg-white flex justify-between p-4"},[e("h2",{class:"float-left text-4xl font-extrabold"},"কর জমা ফর্ম")],-1),Z={class:"mt-4 mb-2 p-4 bg-white"},A={class:"mb-4 flex items-center"},G=e("label",{for:"f_year_id",class:"block text-md font-medium text-[blue] dark:text-white"},"অর্থ-বছর",-1),P=e("option",{selected:"",value:""},"অর্থ-বছর নির্বাচন করুন",-1),Q=["value"],R={class:"mb-4 flex items-center"},W=e("label",{for:"ekhana_id",class:"block text-md font-medium text-[blue] dark:text-white"},"হল্ডিং নাম্বার",-1),ee=e("option",{selected:"",value:""},"হল্ডিং নাম্বার নির্বাচন করুন",-1),te=["value"],oe={class:"flex items-center justify-center mt-4"},ae={key:0,class:"lg:flex justify-center bg-white items-center mt-4 pt-4"},se={class:"border-collapse border border-slate-400 text-center text-md text-left text-gray-500 dark:text-gray-400 rounded-lg m-auto"},re=e("thead",{class:"text-md text-center text-gray-700 uppercase bg-[#11ff5999] dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{colspan:"2",class:"border border-slate-300 px-6 py-4 font-bold text-gray-900 whitespace-nowrap dark:text-white"},"খান তথ্য")])],-1),le=e("th",{scope:"col",class:"border border-slate-300 px-6 py-3"}," হোল্ডিং নাম্বার ",-1),de={scope:"row",class:"border border-slate-300 px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},ne=e("th",{scope:"col",class:"border border-slate-300 px-6 py-3"}," করদাতার নাম ",-1),ie=["readonly"],ce=e("th",{scope:"col",class:"border border-slate-300 px-6 py-3"}," বাৎসরিক আয় ",-1),pe={scope:"row",class:"border border-slate-300 px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},ue=e("th",{scope:"col",class:"border border-slate-300 px-6 py-3"}," পিতা/স্বামীর নাম ",-1),be={scope:"row",class:"border border-slate-300 px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},_e=e("th",{scope:"col",class:"border border-slate-300 px-6 py-3"}," মাতার নাম ",-1),me={scope:"row",class:"border border-slate-300 px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},he=e("th",{scope:"col",class:"border border-slate-300 px-6 py-3"}," এনআইডি নাম ",-1),fe={scope:"row",class:"border border-slate-300 px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},xe=e("th",{scope:"col",class:"border border-slate-300 px-6 py-3"}," মোবাইল নাম্বার ",-1),ye=["readonly"],ge=e("th",{scope:"col",class:"border border-slate-300 px-6 py-3"}," গ্রামের নাম ",-1),ke={scope:"row",class:"border border-slate-300 px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},we=e("th",{scope:"col",class:"border border-slate-300 px-6 py-3"}," ওয়ার্ড নং ",-1),ve={scope:"row",class:"border border-slate-300 px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},Ce={class:"text-md text-center text-gray-700 uppercase bg-[#11ff5999] dark:bg-gray-700 dark:text-gray-400"},Ve={key:1,colspan:"2",class:"border border-slate-300 px-6 py-4 font-bold text-gray-900 whitespace-nowrap dark:text-white"},De={class:"pb-5 pr-4"},je={class:"border-collapse border border-slate-400 text-center m-auto"},Ue=e("thead",{class:"bg-[#11ff5999]"},[e("tr",null,[e("th",{colspan:"2",class:"border border-slate-300 p-2"},"কর জমা ফর্ম")])],-1),Ee=e("th",{class:"border border-slate-300 p-2"},"জমার তারিখ",-1),Te=e("td",{class:"border border-slate-300 p-2"},"করের পরিমাণ",-1),qe={class:"border border-slate-300 bg-gray-100"},Fe=e("td",{class:"border border-slate-300 p-2"},"বকেয়া পাওনা",-1),Ne={class:"border border-slate-300 bg-gray-100"},Se=e("td",{class:"border border-slate-300 p-2"},"দন্ড",-1),$e={class:"border border-slate-300 bg-gray-100"},Be={class:"bg-[#11ff5999]"},He={key:0,colspan:"2",class:"border border-slate-300 p-2"},Ie={key:1,colspan:"2",class:"border border-slate-300 p-2"},Xe={__name:"Create",props:{f_years:Object,ekhanas:Object,taxes:Object},setup(C){const y=new Date;y.getMonth()+1+""+y.getDate()+y.getFullYear();const t=V({f_year_id:"",ekhana_id:"",paid_amount:0,arrear:0,arrears:0,fine:0,deposite_date:null,id:0}),n=V({phone:"",bn_name:"",id:0}),q=m({}),F=D().props.auth.user;D().props.permissions.forEach(function(a,r){a.module.name=="E-Khana"&&a.role_id==F.role_id&&(q.value=a)});const g=m(null),N=m(""),S=m(""),l=m({}),$=()=>{if(!t.f_year_id)return N.value="অর্থ-বছর নির্বাচন করুন",!1;if(!t.ekhana_id)return S.value="হল্ডিং নাম্বার নির্বাচন করুন",!1;axios.post(route("ajax.ekhana.fetch"),t).then(a=>{l.value=a.data.ekhana,g.value=a.data.ht_deposite,t.paid_amount=a.data.ht_deposite.total_amount,t.arrear=a.data.ht_deposite.arrears??0,t.arrears=t.paid_amount-t.arrear,t.fine=a.data.ht_deposite.fine??0,t.id=a.data.ht_deposite.id??0,n.id=a.data.ekhana.id,n.bn_name=a.data.ekhana.bn_name,n.phone=a.data.ekhana.phone,console.log(t,n)}).catch(a=>{console.error(a)}).finally(()=>{console.log("khana fetch done")})},B=()=>{if(!t.deposite_date)return alert("জমার তারিখ নির্বাচন করুন"),!1;axios.post(route("ajax.update",["HouseTaxDeposite"]),t).then(a=>{g.value=a.data,alert("সফলভাবে কর জমা হয়েছে")}).catch(a=>{console.error(a)}).finally(()=>{console.log("House Tax Deposite Store Done")})},i=m(!1),H=()=>{axios.post(route("ajax.update",["Ekhana"]),n).then(a=>{i.value=!1,alert("সফলভাবে আপলোড হয়েছে")}).catch(a=>{console.error(a)}).finally(()=>{console.log("House Tax Deposite Store Done")})};return(a,r)=>{const f=z("InputError");return d(),j(J,{title:"কর জমা"},{default:x(()=>[e("div",X,[u(L,{message:a.$page.props.flash.suc_msg},null,8,["message"]),Y,e("div",Z,[e("form",{onSubmit:r[2]||(r[2]=I((...s)=>a.submit&&a.submit(...s),["prevent"])),class:"bg-[#11ff5999] m-auto rounded-lg p-6 text-2lg max-w-md max-sm:max-w-sm"},[e("div",A,[G,b(e("select",{id:"f_year_id","onUpdate:modelValue":r[0]||(r[0]=s=>o(t).f_year_id=s),class:"border ml-6 border-gray-300 text-[blue] text-md rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 pr-[50px] dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},[P,(d(!0),c(T,null,E(C.f_years,(s,k)=>(d(),c("option",{value:s.id,key:k},p(s.from+"-"+s.to),9,Q))),128))],512),[[U,o(t).f_year_id]]),u(f,{class:"mt-2",message:o(t).errors.eerr},null,8,["message"]),u(f,{class:"mt-2",message:o(t).errors.f_year_id},null,8,["message"])]),e("div",R,[W,b(e("select",{id:"ekhana_id","onUpdate:modelValue":r[1]||(r[1]=s=>o(t).ekhana_id=s),class:"border ml-1 border-gray-300 text-[blue] text-md rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 pr-[33px] dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},[ee,(d(!0),c(T,null,E(C.ekhanas,(s,k)=>(d(),c("option",{value:s.id,key:k},p(s.holding_no),9,te))),128))],512),[[U,o(t).ekhana_id]]),u(f,{class:"mt-2",message:o(t).errors.eerr2},null,8,["message"]),u(f,{class:"mt-2",message:o(t).errors.ekhana_id},null,8,["message"])]),e("div",oe,[u(v,{onClick:$,class:_(["ml-4",{"opacity-25":o(t).processing}]),disabled:o(t).processing},{default:x(()=>[w(" সার্চ করুন ")]),_:1},8,["class","disabled"])])],32)]),l.value.holding_no?(d(),c("div",ae,[e("table",se,[re,e("tbody",null,[e("tr",null,[le,e("td",de,p(l.value.holding_no),1)]),e("tr",null,[ne,e("td",{scope:"row",class:_(["border border-slate-300 px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",[i.value?" p-2":""]])},[b(e("input",{class:_([i.value?"border-[blue]":"border-0 text-center"]),type:"tel",required:"",readonly:!i.value,"onUpdate:modelValue":r[3]||(r[3]=s=>o(n).bn_name=s)},null,10,ie),[[h,o(n).bn_name]])],2)]),e("tr",null,[ce,e("td",pe,p(new Intl.NumberFormat().format(l.value.yearly_income))+"/= ",1)]),e("tr",null,[ue,e("td",be,p(l.value.spouse_name),1)]),e("tr",null,[_e,e("td",me,p(l.value.motder_name),1)]),e("tr",null,[he,e("td",fe,p(l.value.nid),1)]),e("tr",null,[xe,e("td",{scope:"row",class:_(["border border-slate-300 font-medium text-gray-900 whitespace-nowrap dark:text-white",[i.value?" p-2":""]])},[b(e("input",{class:_([i.value?"border-[blue]":"border-0 text-center"]),type:"tel",required:"",readonly:!i.value,"onUpdate:modelValue":r[4]||(r[4]=s=>o(n).phone=s)},null,10,ye),[[h,o(n).phone]])],2)]),e("tr",null,[ge,e("td",ke,p(l.value.village?l.value.village.name:""),1)]),e("tr",null,[we,e("td",ve,p(l.value.word?l.value.word.name:""),1)])]),e("tfoot",Ce,[e("tr",null,[i.value?(d(),c("th",Ve,[u(v,{type:"button",onClick:H,class:_(["ml-4",{"opacity-25":o(t).processing}]),disabled:o(t).processing},{default:x(()=>[w(" আপডেট ")]),_:1},8,["class","disabled"])])):(d(),c("th",{key:0,colspan:"2",onClick:r[5]||(r[5]=s=>i.value=!0),class:"border border-slate-300 px-6 py-4 font-bold text-gray-900 whitespace-nowrap dark:text-white"}," হালনাগাদ "))])])]),e("div",De,[e("form",null,[e("table",je,[Ue,e("tbody",null,[e("tr",null,[Ee,e("td",null,[b(e("input",{class:"border-0",type:"date",required:"","onUpdate:modelValue":r[6]||(r[6]=s=>o(t).deposite_date=s)},null,512),[[h,o(t).deposite_date]])])]),e("tr",null,[Te,e("td",qe,[b(e("input",{class:"bg-gray-100 border-0",readonly:"",type:"text","onUpdate:modelValue":r[7]||(r[7]=s=>o(t).paid_amount=s)},null,512),[[h,o(t).paid_amount]])])]),e("tr",null,[Fe,e("td",Ne,[b(e("input",{class:"bg-gray-100 border-0",readonly:"",type:"number","onUpdate:modelValue":r[8]||(r[8]=s=>o(t).arrear=s)},null,512),[[h,o(t).arrear]])])]),e("tr",null,[Se,e("td",$e,[b(e("input",{class:"bg-gray-100 border-0",readonly:"",type:"number","onUpdate:modelValue":r[9]||(r[9]=s=>o(t).fine=s)},null,512),[[h,o(t).fine]])])])]),e("tfoot",Be,[e("tr",null,[g.value.paid_amount?(d(),c("th",Ie,[(d(),j(M(o(K)),{class:"h-9 p-1 inline font-bold bg-[blue] text-white rounded-full"}))])):(d(),c("th",He,[u(v,{type:"button",onClick:B,class:_(["ml-4",{"opacity-25":o(t).processing}]),disabled:o(t).processing},{default:x(()=>[w(" জমা করুন ")]),_:1},8,["class","disabled"])]))])])])])])])):O("",!0)])]),_:1})}}};export{Xe as default};
