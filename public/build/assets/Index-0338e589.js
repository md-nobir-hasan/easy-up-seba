import{J as w,v as Y,d,k as A,c as v,w as p,o as n,a as e,b as i,j as K,l as V,s as C,u as r,e as u,h as b,t as a,F as h,aZ as L,f as I,g as P,aX as W}from"./app-e3e962d3.js";import{_ as X,C as j}from"./AppLayout-98c72f93.js";import{_ as Z}from"./SucMesgShow-750486e6.js";import{p as G}from"./print-89d28a71.js";import{$ as H,U as Q,_ as R,N as ee}from"./combobox-cfdb8e20.js";import"./ApplicationLogo-c43e2d87.js";const te={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},oe=e("div",{class:"bg-white flex justify-between p-4"},[e("h2",{class:"float-left text-4xl font-extrabold"},"গ্রাম ভিত্তিক ধার্য")],-1),re={class:"mt-4 mb-2 p-4 bg-white"},ae={class:"flex items-center justify-center"},le=e("div",null,[e("label",{for:"word_id",class:"block py-[14px] text-md font-extrabold dark:text-white"},"ওয়ার্ড"),e("label",{for:"f_year_id",class:"block py-[14px] font-extrabold text-md dark:text-white"},"গ্রাম"),e("label",{for:"infrastructure",class:"block py-[14px] text-md font-extrabold dark:text-white"},"প্রতিষ্ঠানের ধরন"),e("label",{for:"f_year_id",class:"block py-[14px] text-md font-extrabold dark:text-white"},"অর্থ-বছর")],-1),se={class:"ml-2"},ne={class:"mb-2 flex items-center"},de=e("option",{selected:"",value:""},"ওয়ার্ড নির্বাচন করুন",-1),ie=["value"],ue={class:"flex"},ce={class:"relative w-full"},me={class:"relative"},fe={class:"mt-2 flex items-center"},ge=e("option",{selected:"",value:""},"প্রতিষ্ঠানের ধরন নির্বাচন করুন",-1),pe=e("option",{value:"আবাসিক"},"আবাসিক",-1),be=e("option",{value:"বানিজ্যিক"},"বানিজ্যিক",-1),he=[ge,pe,be],_e={class:"mt-2 flex items-center"},xe=e("option",{selected:"",value:""},"অর্থ-বছর নির্বাচন করুন",-1),ye=["value"],ke={key:0},we={key:1,id:"table"},ve={id:"my-table",class:"text-center"},Ve={class:"bg-[yellow] p-[8px] font-extrabold text-[20px] text-center h1div"},Ce=e("thead",null,[e("tr",null,[e("th",{rowspan:"2"},"হোল্ডিং নাম্বার"),e("th",{rowspan:"2"},"করদাতার নাম"),e("th",{rowspan:"2"},"বাৎসরিক আয়"),e("th",{rowspan:"2"}," পিতা/স্বামীর নাম"),e("th",{rowspan:"2"},"মাতার নাম"),e("th",{rowspan:"2"}," এনআইডি নাম"),e("th",{rowspan:"2"},"মোবাইল নাম্বার"),e("th",{rowspan:"2"},"গ্রামের নাম"),e("th",{rowspan:"2"},"ওয়ার্ড নং"),e("th",{colspan:"3"},"সম্পদের বিবরন"),e("th",{rowspan:"2"},"বাৎসরিক ভাড়ার পরিমাণ"),e("th",{rowspan:"2"},"অর্থ-বছর"),e("th",{rowspan:"2"},"হাল করের পরিমাণ"),e("th",{rowspan:"2"},"বকেয়া করের পরিমাণ"),e("th",{rowspan:"2"},"সর্বমোট করের পরিমাণ")]),e("tr",null,[e("th",null,"পাকা"),e("th",null,"আধাপাকা"),e("th",null,"কাঁচা")])],-1),$e={__name:"Index",props:{f_years:Object,words:Object,tax:Object,vilgs:Object},setup(_){const F=_,E=w().props.auth.user,x=new Date;x.getMonth()+1+""+x.getDate()+x.getFullYear();const l=Y({f_year_id:"",word_id:E.word_id,village_id:"",infrastructure:""}),M=d({}),$=w().props.auth.user;w().props.permissions.forEach(function(o,s){o.module.name=="E-Khana"&&o.role_id==$.role_id&&(M.value=o)}),d(null);const D=d(""),S=d(""),g=d({});d(null);const U=()=>{if(!l.f_year_id)return D.value="অর্থ-বছর নির্বাচন করুন",!1;if(!l.village_id)return S.value="হল্ডিং নাম্বার নির্বাচন করুন",!1;console.log("i am form"),console.log(l),axios.post(route("ajax.ekhana.vlevy"),l).then(o=>{console.log(o),g.value=o.data.village_levy}).catch(o=>{console.error(o)}).finally(()=>{console.log("khana fetch done")})},m=d(F.vilgs),y=d(!1),q=()=>{axios.get(route("ajax.fetch",["Village","word_id",l.word_id]),l).then(o=>{console.log(o),m.value=o.data,console.log(m.value),m.value.length==0?(y.value=!0,m.value={}):y.value=!1}).catch(o=>{y.value=!0,m.value={},console.error(o)}).finally(()=>{console.log("Village fetch done")})},k=d(""),B=A(()=>k.value===""?m.value:m.value.filter(o=>o.name.includes(k.value))),N=d(null),O=()=>{let o=document.getElementById("f_year_id"),s=o.selectedIndex,c=o.options[s].text;N.value=c},T=()=>{G({printable:"table",type:"html",style:"#my-table { border-collapse: collapse; width: 100%; font-size: 14px;margin-top:20px } #my-table th { background-color: #f2f2f2; color: #444; font-weight: bold; padding: 2px; text-align: left; border: 1px solid #ddd; } #my-table td { background-color: #fff; color: #444; padding: 2px; text-align: left; border: 1px solid #ddd; } #my-table tbody tr:nth-child(even) { background-color: #f2f2f2; } .h1div{font-size:40px !important; font-weight:bolder; text-align:center; margin-top:20px !important}",maxWidth:800,font:"Open Sans",honorMarginPadding:!0})},z=new Table2Excel,J=()=>{z.export(document.querySelectorAll("#my-table"))};return(o,s)=>{const c=W("InputError");return n(),v(X,{title:"গ্রাম ভিত্তিক ধার্য"},{default:p(()=>[e("div",te,[i(Z,{message:o.$page.props.flash.suc_msg},null,8,["message"]),oe,e("div",re,[e("form",{onSubmit:s[5]||(s[5]=K((...t)=>o.submit&&o.submit(...t),["prevent"])),class:"bg-[#008494db] text-[white] m-auto rounded-lg p-6 pb-[2px] text-2lg max-w-md max-sm:max-w-sm"},[e("div",ae,[le,e("div",se,[e("div",ne,[V(e("select",{id:"word_id","onUpdate:modelValue":s[0]||(s[0]=t=>r(l).word_id=t),onChange:q,class:"border text-[black] w-full border-gray-300 text-md rounded-lg focus:ring-blue-500 focus:border-blue-500 block dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},[de,(n(!0),u(h,null,b(_.words,(t,f)=>(n(),u("option",{value:t.id,key:f},a(t.name+"-"+t.union.name),9,ie))),128))],544),[[C,r(l).word_id]]),i(c,{class:"mt-2",message:r(l).errors.eerr},null,8,["message"]),i(c,{class:"mt-2",message:r(l).errors.word_id},null,8,["message"])]),i(r(ee),{modelValue:r(l).village_id,"onUpdate:modelValue":s[2]||(s[2]=t=>r(l).village_id=t)},{default:p(()=>[e("div",ue,[e("div",ce,[i(r(H),{onChange:s[1]||(s[1]=t=>k.value=t.target.value),displayValue:t=>t.name,type:"text",class:"border text-[black] min-w-[100%] border-gray-300 text-md rounded-lg focus:ring-blue-500 focus:border-blue-500 block dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,8,["displayValue"]),r(j)?(n(),v(L(r(j)),{key:0,class:"h-4 mr-1 absolute right-[11px] top-[13px]"})):I("",!0)])]),e("div",me,[i(r(Q),{class:"absolute text-[black] p-4 mt-1 bg-[white] left-[16px] w-[222px] rounded-lg"},{default:p(()=>[(n(!0),u(h,null,b(r(B),t=>(n(),v(r(R),{class:"cursor-pointer",autocomplete:"off",key:t.id,value:t},{default:p(()=>[P(a(t.name),1)]),_:2},1032,["value"]))),128))]),_:1})])]),_:1},8,["modelValue"]),e("div",fe,[V(e("select",{id:"infrastructure","onUpdate:modelValue":s[3]||(s[3]=t=>r(l).infrastructure=t),class:"border w-full text-[black] border-gray-300 text-md rounded-lg focus:ring-blue-500 focus:border-blue-500 block dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},he,512),[[C,r(l).infrastructure]]),i(c,{class:"mt-2",message:r(l).errors.eerr},null,8,["message"]),i(c,{class:"mt-2",message:r(l).errors.infrastructure},null,8,["message"])]),e("div",_e,[V(e("select",{onChange:O,id:"f_year_id","onUpdate:modelValue":s[4]||(s[4]=t=>r(l).f_year_id=t),class:"border w-full text-[black] border-gray-300 text-md rounded-lg focus:ring-blue-500 focus:border-blue-500 block dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},[xe,(n(!0),u(h,null,b(_.f_years,(t,f)=>(n(),u("option",{value:t.id,key:f},a(t.from+"-"+t.to),9,ye))),128))],544),[[C,r(l).f_year_id]]),i(c,{class:"mt-2",message:r(l).errors.eerr},null,8,["message"]),i(c,{class:"mt-2",message:r(l).errors.f_year_id},null,8,["message"])])])]),e("div",{class:"flex items-center justify-center mt-8"},[e("button",{onClick:U,type:"submit",class:"text-white text-[18px] font-extrabold bg-gradient-to-r from-pink-400 via-pink-500 to-pink-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-pink-300 dark:focus:ring-pink-800 shadow-lg shadow-pink-500/50 dark:shadow-lg dark:shadow-pink-800/80 rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"},"অনুসন্ধান")])],32)]),g.value.length>0?(n(),u("div",ke,[e("button",{type:"button",onClick:s[6]||(s[6]=t=>T()),class:"text-white bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-cyan-300 dark:focus:ring-cyan-800 shadow-lg shadow-cyan-500/50 dark:shadow-lg dark:shadow-cyan-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"}," তালিকা প্রিন্ট "),e("button",{type:"button",onClick:s[7]||(s[7]=t=>J()),class:"text-white bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-cyan-300 dark:focus:ring-cyan-800 shadow-lg shadow-cyan-500/50 dark:shadow-lg dark:shadow-cyan-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"}," Excel ")])):I("",!0),g.value.length>0?(n(),u("div",we,[e("table",ve,[e("caption",Ve,"গ্রাম ভিত্তিক ধার্য করের পরিমাণ ("+a(r(l).infrastructure)+") - ("+a(N.value)+")",1),Ce,e("tbody",null,[(n(!0),u(h,null,b(g.value,(t,f)=>(n(),u("tr",{key:f},[e("td",null,a(t.holding_no),1),e("td",null,a(t.bn_name),1),e("td",null,a(new Intl.NumberFormat().format(t.yearly_income))+"/=",1),e("td",null,a(t.spouse_name),1),e("td",null,a(t.mother_name),1),e("td",null,a(t.nid),1),e("td",null,a(t.phone),1),e("td",null,a(t.vill_name),1),e("td",null,a(t.w_name),1),e("td",null,a(t.paka_house),1),e("td",null,a(t.adhapaka_house),1),e("td",null,a(t.kasa_house),1),e("td",null,a(new Intl.NumberFormat().format(t.yearly_house_rent))+"/=",1),e("td",null,a(t.fy_from+"-"+t.fy_to),1),e("td",null,a(new Intl.NumberFormat().format(Math.round(t.total_amount)))+"/=",1),e("td",null,a(new Intl.NumberFormat().format(Math.round(t.prev_arrears)))+"/=",1),e("td",null,a(new Intl.NumberFormat().format(Math.round(t.paid_amount)))+"/=",1)]))),128))])])])):I("",!0)])]),_:1})}}};export{$e as default};
