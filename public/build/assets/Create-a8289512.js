import{v as D,J as x,d as b,k as R,c as g,w as k,o as r,a as e,b as m,j as X,l as i,s as Y,u as o,e as p,h as j,F as M,aZ as N,f as $,g as q,n as c,t as f,H as h,bm as y,aX as Z}from"./app-0d011f74.js";import{_ as A,C as E,d as G}from"./AppLayout-c8fd38ec.js";import{_ as Q}from"./SucMesgShow-19cb7b20.js";import{_ as S}from"./PrimaryButton-00e77c5f.js";import{$ as W,U as ee,N as te,_ as oe}from"./combobox-b4b7f74f.js";import"./ApplicationLogo-5fb0c49a.js";const se={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},ae=e("div",{class:"bg-white flex justify-between p-4"},[e("h2",{class:"float-left text-4xl font-extrabold"},"কর জমা ফর্ম")],-1),le={class:"mt-4 mb-2 p-4 bg-white"},re={class:"mb-4 flex items-center"},de=e("label",{for:"f_year_id",class:"block text-md font-medium text-[blue] dark:text-white mr-[27px]"},"অর্থ-বছর",-1),ie=e("option",{selected:"",value:""},"অর্থ-বছর নির্বাচন করুন",-1),ne=["value"],ue={class:"flex"},pe=e("label",{for:"f_year_id",class:"block text-md font-medium text-[blue] dark:text-white"},"হোল্ডিং নাম্বার",-1),ce={class:"relative"},_e={class:"relative"},be={class:"flex items-center justify-center mt-4"},me={key:0,class:"lg:flex justify-center bg-white items-center mt-4 pt-4"},he={class:"border-collapse mb-4 border border-slate-400 text-center text-md text-left text-gray-500 dark:text-gray-400 rounded-lg m-auto"},fe=e("thead",{class:"text-md text-center text-gray-700 uppercase bg-[#11ff5999] dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{colspan:"2",class:"border border-slate-300 px-6 py-4 font-bold text-gray-900 whitespace-nowrap dark:text-white"},"খান তথ্য")])],-1),ke=e("th",{scope:"col",class:"border border-slate-300 px-6 py-3"}," হোল্ডিং নাম্বার ",-1),ye={scope:"row",class:"border border-slate-300 px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},xe=e("th",{scope:"col",class:"border border-slate-300 px-6 py-3"}," করদাতার নাম ",-1),ge=["readonly"],ve=e("th",{scope:"col",class:"border border-slate-300 px-6 py-3"}," বাৎসরিক আয় ",-1),we={scope:"row",class:"border border-slate-300 px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},Ve=e("th",{scope:"col",class:"border border-slate-300 px-6 py-3"}," পিতা/স্বামীর নাম ",-1),qe=["readonly"],Ue=e("th",{scope:"col",class:"border border-slate-300 px-6 py-3"}," মাতার নাম ",-1),Ce=["readonly"],De=e("th",{scope:"col",class:"border border-slate-300 px-6 py-3"}," এনআইডি নাম ",-1),je={scope:"row",class:"border border-slate-300 px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},Me=e("th",{scope:"col",class:"border border-slate-300 px-6 py-3"}," মোবাইল নাম্বার ",-1),Ne=["readonly"],$e=e("th",{scope:"col",class:"border border-slate-300 px-6 py-3"}," গ্রামের নাম ",-1),Ee={scope:"row",class:"border border-slate-300 px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},Se=e("th",{scope:"col",class:"border border-slate-300 px-6 py-3"}," ওয়ার্ড নং ",-1),Te={scope:"row",class:"border border-slate-300 px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},Fe={class:""},Ie=e("button",{type:"button",class:"text-white bg-gradient-to-r from-purple-500 via-purple-600 to-purple-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-purple-300 dark:focus:ring-purple-800 shadow-lg shadow-purple-500/50 dark:shadow-lg dark:shadow-purple-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center w-full"},"হালনাগাদ",-1),Be=[Ie],He={key:1,colspan:"2",class:"text-center"},Oe=["disabled"],Le={class:"pb-5 pr-4 md:mt-6"},ze={class:"border-collapse border border-slate-400 text-center m-auto"},Je=e("thead",{class:"bg-[#11ff5999]"},[e("tr",null,[e("th",{colspan:"2",class:"border border-slate-300 p-2"},"কর জমা ফর্ম")])],-1),Ke=e("th",{class:"border border-slate-300 p-2"},"জমার তারিখ",-1),Pe={key:0},Re=e("input",{class:"border-0",type:"date",disabled:""},null,-1),Xe=[Re],Ye=e("th",{class:"border border-slate-300 p-2"},"কিস্তি",-1),Ze={class:"border border-slate-300"},Ae={key:0},Ge=e("input",{class:"text-[#80808087]",id:"kisti1",disabled:"",checked:"",type:"radio",required:"",value:"1"},null,-1),Qe=e("label",{for:"kisti1",class:"text-[#80808087] ml-1"},"১ম",-1),We=e("input",{class:"ml-2 text-[#80808087]",disabled:"",id:"kisti2",checked:"",type:"radio",required:"",value:"2"},null,-1),et=e("label",{for:"kisti2",class:"ml-1 text-[#80808087]",disabled:""},"২য়",-1),tt=e("input",{class:"ml-2 text-[#80808087]",id:"kisti3",checked:"",disabled:"",type:"radio",required:"",value:"3"},null,-1),ot=e("label",{for:"kisti3",class:"ml-1 text-[#80808087]",checked:"",disabled:""},"৩য়",-1),st=[Ge,Qe,We,et,tt,ot],at={key:1},lt=e("input",{class:"text-[#80808087]",id:"kisti1",disabled:"",checked:"",type:"radio",required:"",value:"1"},null,-1),rt=e("label",{for:"kisti1",class:"text-[#80808087]"},"১ম",-1),dt=e("input",{class:"ml-2 text-[#80808087]",disabled:"",id:"kisti2",checked:"",type:"radio",required:"",value:"2"},null,-1),it=e("label",{for:"kisti2",class:"ml-1 text-[#80808087]",disabled:""},"২য়",-1),nt=e("label",{for:"kisti3",class:"ml-1"},"৩য়",-1),ut={key:2},pt=e("input",{class:"text-[#80808087]",id:"kisti1",disabled:"",checked:"",type:"radio",required:"",value:"1"},null,-1),ct=e("label",{for:"kisti1",class:"text-[#80808087] ml-1"},"১ম",-1),_t=e("label",{for:"kisti2",class:"ml-1"},"২য়",-1),bt=e("label",{for:"kisti3",class:"ml-1"},"৩য়",-1),mt={key:3},ht=e("label",{for:"kisti1",class:"ml-1"},"১ম",-1),ft=e("label",{for:"kisti2",class:"ml-1"},"২য়",-1),kt=e("label",{for:"kisti3",class:"ml-1"},"৩য়",-1),yt=e("td",{class:"border border-slate-300 p-2"},"করের পরিমাণ",-1),xt={class:"border border-slate-300 bg-gray-100"},gt=e("td",{class:"border border-slate-300 p-2"},"বকেয়া পাওনা",-1),vt={class:"border border-slate-300 bg-gray-100"},wt=e("td",{class:"border border-slate-300 p-2"},"দন্ড",-1),Vt={class:"border border-slate-300 bg-gray-100"},qt={class:"bg-[#11ff5999]"},Ut={key:0,colspan:"2",class:"border border-slate-300 p-2"},Ct={key:1,colspan:"2",class:"border border-slate-300 p-2"},St={__name:"Create",props:{f_years:Object,ekhanas:Object,taxes:Object},setup(U){const T=U,v=new Date;v.getMonth()+1+""+v.getDate()+v.getFullYear();const t=D({f_year_id:"",ekhana_id:String(x().props.auth.user.word.union.code+x().props.auth.user.word.code),paid_amount:0,arrears:0,fine:0,deposite_date:null,id:0,kisti:null}),n=D({phone:"",bn_name:"",spouse_name:"",mother_name:"",id:0}),F=b({}),I=x().props.auth.user;x().props.permissions.forEach(function(s,l){s.module.name=="E-Khana"&&s.role_id==I.role_id&&(F.value=s)});const u=b(null),B=b(""),H=b(""),_=b({}),O=b(null),L=()=>{if(!t.f_year_id)return B.value="অর্থ-বছর নির্বাচন করুন",!1;if(!t.ekhana_id)return H.value="হল্ডিং নাম্বার নির্বাচন করুন",!1;console.log("i am form"),console.log(t),axios.post(route("ajax.ekhana.fetch"),t).then(s=>{_.value=s.data.ekhana,u.value=s.data.ht_deposite,t.paid_amount=Math.round(s.data.ht_deposite.total_amount/3),t.arrears=s.data.ht_deposite.total_amount-(s.data.ht_deposite.paid_amount>0?s.data.ht_deposite.paid_amount:0),t.fine=Math.round(s.data.ht_deposite.fine??0),t.id=s.data.ht_deposite.id??0,O.value=s.data.ht_deposite.deposite_date,n.id=s.data.ekhana.id,n.bn_name=s.data.ekhana.bn_name,n.spouse_name=s.data.ekhana.spouse_name,n.mother_name=s.data.ekhana.mother_name,n.phone=s.data.ekhana.phone,s.data.ht_deposite.t_kisti>0?t.paid_amount=0:s.data.ht_deposite.s_kisti>0&&s.data.ht_deposite.t_kisti<1&&(t.paid_amount=t.arrears),console.log(s)}).catch(s=>{console.error(s)}).finally(()=>{console.log("khana fetch done")})},z=()=>{if(console.log(t),!t.deposite_date)return alert("জমার তারিখ নির্বাচন করুন"),!1;axios.post(route("ajax.update",["HouseTaxDeposite"]),t).then(s=>{u.value=s.data,t.paid_amount=Math.round(s.data.ht_deposite.total_amount/3),s.data.t_kisti>0?t.paid_amount=0:s.data.ht_deposite.s_kisti>0&&s.data.ht_deposite.t_kisti<1&&(t.paid_amount=t.arrears),t.arrears=s.data.total_amount-(s.data.paid_amount>0?s.data.paid_amount:0),t.fine=Math.round(s.data.fine??0),alert("সফলভাবে কর জমা হয়েছে")}).catch(s=>{console.error(s)}).finally(()=>{console.log("House Tax Deposite Store Done")})},d=b(!1),J=()=>{axios.post(route("ajax.update",["Ekhana"]),n).then(s=>{d.value=!1,alert("সফলভাবে আপলোড হয়েছে")}).catch(s=>{console.error(s)}).finally(()=>{console.log("House Tax Deposite Store Done")})},w=T.ekhanas;console.log("i ama people"),console.dir(w),b();const V=b(""),K=R(()=>V.value===""?w:w.filter(s=>s.holding_no.includes(V.value.toLowerCase())));return(s,l)=>{const C=Z("InputError");return r(),g(A,{title:"কর জমা"},{default:k(()=>[e("div",se,[m(Q,{message:s.$page.props.flash.suc_msg},null,8,["message"]),ae,e("div",le,[e("form",{onSubmit:l[3]||(l[3]=X((...a)=>s.submit&&s.submit(...a),["prevent"])),class:"bg-[#11ff5999] m-auto rounded-lg p-6 text-2lg max-w-md max-sm:max-w-sm"},[e("div",re,[de,i(e("select",{id:"f_year_id","onUpdate:modelValue":l[0]||(l[0]=a=>o(t).f_year_id=a),class:"border ml-6 border-gray-300 text-[blue] text-md rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 pr-[50px] dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},[ie,(r(!0),p(M,null,j(U.f_years,(a,P)=>(r(),p("option",{value:a.id,key:P},f(a.from+"-"+a.to),9,ne))),128))],512),[[Y,o(t).f_year_id]]),m(C,{class:"mt-2",message:o(t).errors.eerr},null,8,["message"]),m(C,{class:"mt-2",message:o(t).errors.f_year_id},null,8,["message"])]),m(o(te),{modelValue:o(t).ekhana_id,"onUpdate:modelValue":l[2]||(l[2]=a=>o(t).ekhana_id=a)},{default:k(()=>[e("div",ue,[pe,e("div",ce,[m(o(W),{onChange:l[1]||(l[1]=a=>V.value=a.target.value),class:"border ml-6 border-gray-300 text-[blue] text-md rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 pr-[40px] dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"}),o(E)?(r(),g(N(o(E)),{key:0,class:"h-4 mr-1 absolute right-[11px] top-[13px]"})):$("",!0)])]),e("div",_e,[m(o(ee),{class:"absolute p-4 mt-1 bg-[white] left-[115px] w-[222px] rounded-lg"},{default:k(()=>[(r(!0),p(M,null,j(o(K),a=>(r(),g(o(oe),{class:"cursor-pointer",autocomplete:"off",key:a.id,value:a.holding_no},{default:k(()=>[q(f(a.holding_no),1)]),_:2},1032,["value"]))),128))]),_:1})])]),_:1},8,["modelValue"]),e("div",be,[m(S,{onClick:L,class:c(["ml-4",{"opacity-25":o(t).processing}]),disabled:o(t).processing},{default:k(()=>[q(" সার্চ করুন ")]),_:1},8,["class","disabled"])])],32)]),_.value.holding_no?(r(),p("div",me,[e("table",he,[fe,e("tbody",null,[e("tr",null,[ke,e("td",ye,f(_.value.holding_no),1)]),e("tr",null,[xe,e("td",{scope:"row",class:c(["border border-slate-300 px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",[d.value?" p-2":""]])},[i(e("input",{class:c([d.value?"border-[blue]":"border-0 text-center"]),type:"tel",required:"",readonly:!d.value,"onUpdate:modelValue":l[4]||(l[4]=a=>o(n).bn_name=a)},null,10,ge),[[h,o(n).bn_name]])],2)]),e("tr",null,[ve,e("td",we,f(new Intl.NumberFormat().format(_.value.yearly_income))+"/= ",1)]),e("tr",null,[Ve,e("td",{scope:"row",class:c(["border border-slate-300 px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",[d.value?" p-2":""]])},[i(e("input",{class:c([d.value?"border-[blue]":"border-0 text-center"]),type:"tel",required:"",readonly:!d.value,"onUpdate:modelValue":l[5]||(l[5]=a=>o(n).spouse_name=a)},null,10,qe),[[h,o(n).spouse_name]])],2)]),e("tr",null,[Ue,e("td",{scope:"row",class:c(["border border-slate-300 px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",[d.value?" p-2":""]])},[i(e("input",{class:c([d.value?"border-[blue]":"border-0 text-center"]),type:"tel",required:"",readonly:!d.value,"onUpdate:modelValue":l[6]||(l[6]=a=>o(n).mother_name=a)},null,10,Ce),[[h,o(n).mother_name]])],2)]),e("tr",null,[De,e("td",je,f(_.value.nid),1)]),e("tr",null,[Me,e("td",{scope:"row",class:c(["border border-slate-300 font-medium text-gray-900 whitespace-nowrap dark:text-white",[d.value?" p-2":""]])},[i(e("input",{class:c([d.value?"border-[blue]":"border-0 text-center"]),type:"tel",required:"",readonly:!d.value,"onUpdate:modelValue":l[7]||(l[7]=a=>o(n).phone=a)},null,10,Ne),[[h,o(n).phone]])],2)]),e("tr",null,[$e,e("td",Ee,f(_.value.village?_.value.village.name:""),1)]),e("tr",null,[Se,e("td",Te,f(_.value.word?_.value.word.name:""),1)])]),e("tfoot",Fe,[e("tr",null,[d.value?(r(),p("th",He,[e("button",{type:"button",onClick:J,class:c(["text-white bg-gradient-to-r from-pink-400 via-pink-500 to-pink-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-pink-300 dark:focus:ring-pink-800 shadow-lg shadow-pink-500/50 dark:shadow-lg dark:shadow-pink-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center w-full",{"opacity-25":o(t).processing}]),disabled:o(t).processing},"আপডেট",10,Oe)])):(r(),p("th",{key:0,colspan:"2",onClick:l[8]||(l[8]=a=>d.value=!0)},Be))])])]),e("div",Le,[e("form",null,[e("table",ze,[Je,e("tbody",null,[e("tr",null,[Ke,e("td",null,[u.value.f_kisti>0&&u.value.s_kisti>0&&u.value.t_kisti>0?(r(),p("div",Pe,Xe)):i((r(),p("input",{key:1,class:"border-0",type:"date",required:"","onUpdate:modelValue":l[9]||(l[9]=a=>o(t).deposite_date=a)},null,512)),[[h,o(t).deposite_date]])])]),e("tr",null,[Ye,e("td",Ze,[u.value.f_kisti>0&&u.value.s_kisti>0&&u.value.t_kisti>0?(r(),p("div",Ae,st)):u.value.s_kisti>0&&u.value.f_kisti>0?(r(),p("div",at,[lt,rt,dt,it,i(e("input",{class:"ml-2",id:"kisti3",type:"radio",required:"",value:"3","onUpdate:modelValue":l[10]||(l[10]=a=>o(t).kisti=a)},null,512),[[y,o(t).kisti]]),nt])):u.value.f_kisti>0?(r(),p("div",ut,[pt,ct,i(e("input",{class:"ml-2",id:"kisti2",type:"radio",required:"",value:"2","onUpdate:modelValue":l[11]||(l[11]=a=>o(t).kisti=a)},null,512),[[y,o(t).kisti]]),_t,i(e("input",{class:"ml-2",id:"kisti3",type:"radio",required:"",value:"3","onUpdate:modelValue":l[12]||(l[12]=a=>o(t).kisti=a)},null,512),[[y,o(t).kisti]]),bt])):(r(),p("div",mt,[i(e("input",{class:"",id:"kisti1",type:"radio",required:"",value:"1","onUpdate:modelValue":l[13]||(l[13]=a=>o(t).kisti=a)},null,512),[[y,o(t).kisti]]),ht,i(e("input",{class:"ml-2",id:"kisti2",type:"radio",required:"",value:"2","onUpdate:modelValue":l[14]||(l[14]=a=>o(t).kisti=a)},null,512),[[y,o(t).kisti]]),ft,i(e("input",{class:"ml-2",id:"kisti3",type:"radio",required:"",value:"3","onUpdate:modelValue":l[15]||(l[15]=a=>o(t).kisti=a)},null,512),[[y,o(t).kisti]]),kt]))])]),e("tr",null,[yt,e("td",xt,[i(e("input",{class:"bg-gray-100 border-0",readonly:"",type:"text","onUpdate:modelValue":l[16]||(l[16]=a=>o(t).paid_amount=a)},null,512),[[h,o(t).paid_amount]])])]),e("tr",null,[gt,e("td",vt,[i(e("input",{class:"bg-gray-100 border-0",readonly:"",type:"number","onUpdate:modelValue":l[17]||(l[17]=a=>o(t).arrears=a)},null,512),[[h,o(t).arrears]])])]),e("tr",null,[wt,e("td",Vt,[i(e("input",{class:"bg-gray-100 border-0",readonly:"",type:"number","onUpdate:modelValue":l[18]||(l[18]=a=>o(t).fine=a)},null,512),[[h,o(t).fine]])])])]),e("tfoot",qt,[e("tr",null,[u.value.f_kisti>0&&u.value.s_kisti>0&&u.value.t_kisti>0?(r(),p("th",Ut,[(r(),g(N(o(G)),{class:"h-9 p-1 inline font-bold bg-[blue] text-white rounded-full"}))])):(r(),p("th",Ct,[m(S,{type:"button",onClick:z,class:c(["ml-4",{"opacity-25":o(t).processing}]),disabled:o(t).processing},{default:k(()=>[q(" জমা করুন ")]),_:1},8,["class","disabled"])]))])])])])])])):$("",!0)])]),_:1})}}};export{St as default};
