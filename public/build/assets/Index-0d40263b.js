import{J as y,v as U,d as k,c as q,w as O,o as i,a as t,b as c,j as T,l as g,s as S,u as n,e as _,h as v,F as w,H as C,f as V,t as o,aX as z}from"./app-d4c0aa54.js";import{_ as J}from"./AppLayout-ba7e0444.js";import{_ as Y}from"./SucMesgShow-4bebe955.js";import{p as A}from"./print-4da0fe1f.js";import"./ApplicationLogo-0411fcea.js";const H={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},K=t("div",{class:"bg-white flex justify-between p-4"},[t("h2",{class:"float-left text-4xl font-extrabold"},"ওয়ার্ড ভিত্তিক ডেইলি পোষ্টিং")],-1),L={class:"mt-4 mb-2 p-4 bg-white"},P={class:"mb-2 flex items-center"},W=t("label",{for:"word_id",class:"block min-w-[30%] text-md font-extrabold dark:text-white"},"ওয়ার্ড",-1),X=t("option",{selected:"",value:""},"ওয়ার্ড নির্বাচন করুন",-1),G=["value"],Q={class:"mt-2 flex items-center"},R=t("label",{for:"f_year_id",class:"block min-w-[30%] text-md font-extrabold dark:text-white"},"অর্থ-বছর",-1),Z=t("option",{selected:"",value:""},"অর্থ-বছর নির্বাচন করুন",-1),tt=["value"],et={class:"mt-2 flex items-center"},at=t("label",{for:"f_year_id",class:"block min-w-[30%] text-md font-extrabold dark:text-white"},"তারিখ",-1),ot={class:"flex min-w-[65%]"},rt={key:0},lt={key:1,id:"table"},dt={class:"bg-[#f73532c2] text-white block p-[8px] font-extrabold text-[20px] text-center h1div"},nt={id:"my-table",class:"text-center"},st={class:"bg-[yellow] p-[8px] font-extrabold text-[20px] text-center"},it=t("thead",null,[t("tr",null,[t("th",null,"ওয়ার্ড নাম্বার"),t("th",null,"গ্রামের সংখ্যা"),t("th",null,"খানার সংখ্যা"),t("th",null,"আদায়কৃত খানার সংখ্যা "),t("th",null,"হাল ধার্য্য কর"),t("th",null,"হাল আদায়"),t("th",null,"হাল বকেয়া"),t("th",null,"পূর্বের বকেয়া "),t("th",null,"বকেয়া আদায় "),t("th",null,"সর্বমোট আদায় "),t("th",null,"সর্বমোট বকেয়া (হাল বকেয়া + পূর্বের বকেয়া)"),t("th",null,"অর্থ-বছর"),t("th",null,"আদায়ের শতকরা হার")])],-1),ut=["data-val"],_t=["data-val"],ct=["data-val"],ht=["data-val"],pt=["data-val"],mt=["data-val"],gt=["data-val"],bt=["data-val"],ft=["data-val"],xt=["data-val"],yt=["data-val"],kt=["data-val"],vt=t("th",null,"সর্বমোট",-1),wt=t("th",null,"=>>",-1),jt={__name:"Index",props:{f_years:Object,words:Object},setup(E){y().props.auth.user;const l=U({f_year_id:"",word_id:"",from_date:"",to_date:""}),$=k({}),j=y().props.auth.user;y().props.permissions.forEach(function(a,r){a.module.name=="E-Khana"&&a.role_id==j.role_id&&($.value=a)});const b=new Date;b.getMonth()+1+""+b.getDate()+b.getFullYear();const p=k({}),I=()=>{if(!l.f_year_id)return eerr.value="অর্থ-বছর নির্বাচন করুন",!1;axios.post(route("ajax.ekhana.toplist.daily.posting"),l).then(a=>{p.value=a.data.dailypost,console.log(a.data)}).catch(a=>{console.error(a)}).finally(()=>{console.log("khana fetch done")})},m=k(null),B=()=>{let a=document.getElementById("f_year_id"),r=a.selectedIndex,s=a.options[r].text;m.value=s},M=()=>{A({printable:"table",type:"html",style:"#my-table { border-collapse: collapse; width: 100%; font-size: 14px;margin-top:20px } #my-table th { background-color: #f2f2f2; color: #444; font-weight: bold; padding: 2px; text-align: left; border: 1px solid #ddd; } #my-table td { background-color: #fff; color: #444; padding: 2px; text-align: left; border: 1px solid #ddd; } #my-table tbody tr:nth-child(even) { background-color: #f2f2f2; } .h1div{font-size:40px !important; font-weight:bolder; text-align:center; margin-top:20px !important}",maxWidth:800,font:"Open Sans",honorMarginPadding:!0})},N=new Table2Excel,D=()=>{N.export(document.querySelectorAll("#my-table"))};function u(a){let r=0;return a.forEach(s=>{r+=Number(s.total_amount)}),r}function d(a){let r=0;return a.forEach(s=>{r+=Number(s.paid_amount)}),r}const f=0,x=0,F=0;return(a,r)=>{const s=z("InputError");return i(),q(J,{title:"ডেইলি পোষ্টিং"},{default:O(()=>[t("div",H,[c(Y,{message:a.$page.props.flash.suc_msg},null,8,["message"]),K,t("div",L,[t("form",{onSubmit:r[4]||(r[4]=T((...e)=>a.submit&&a.submit(...e),["prevent"])),class:"bg-[#008494db] text-[white] m-auto rounded-lg p-6 pb-[2px] text-2lg max-w-md max-sm:max-w-sm"},[t("div",P,[W,g(t("select",{id:"word_id","onUpdate:modelValue":r[0]||(r[0]=e=>n(l).word_id=e),class:"border text-[black] min-w-[65%] border-gray-300 text-md rounded-lg focus:ring-blue-500 focus:border-blue-500 block dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},[X,(i(!0),_(w,null,v(E.words,(e,h)=>(i(),_("option",{value:e.id,key:h},o(e.name+"-"+e.union.name),9,G))),128))],512),[[S,n(l).word_id]]),c(s,{class:"mt-2",message:n(l).errors.eerr},null,8,["message"]),c(s,{class:"mt-2",message:n(l).errors.word_id},null,8,["message"])]),t("div",Q,[R,g(t("select",{onChange:B,id:"f_year_id","onUpdate:modelValue":r[1]||(r[1]=e=>n(l).f_year_id=e),class:"border min-w-[65%] text-[black] border-gray-300 text-md rounded-lg focus:ring-blue-500 focus:border-blue-500 block dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},[Z,(i(!0),_(w,null,v(E.f_years,(e,h)=>(i(),_("option",{value:e.id,key:h},o(e.from+"-"+e.to),9,tt))),128))],544),[[S,n(l).f_year_id]]),c(s,{class:"mt-2",message:n(l).errors.eerr},null,8,["message"]),c(s,{class:"mt-2",message:n(l).errors.f_year_id},null,8,["message"])]),t("div",et,[at,t("div",ot,[g(t("input",{"onUpdate:modelValue":r[2]||(r[2]=e=>n(l).from_date=e),type:"date",class:"border mr-2 text-[black] border-gray-300 text-md rounded-lg focus:ring-blue-500 focus:border-blue-500 block dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[C,n(l).from_date]]),g(t("input",{"onUpdate:modelValue":r[3]||(r[3]=e=>n(l).to_date=e),type:"date",class:"border text-[black] border-gray-300 text-md rounded-lg focus:ring-blue-500 focus:border-blue-500 block dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[C,n(l).to_date]])]),c(s,{class:"mt-2",message:n(l).errors.eerr},null,8,["message"]),c(s,{class:"mt-2",message:n(l).errors.f_year_id},null,8,["message"])]),t("div",{class:"flex items-center justify-center mt-8"},[t("button",{onClick:I,type:"submit",class:"text-white text-[18px] font-extrabold bg-gradient-to-r from-pink-400 via-pink-500 to-pink-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-pink-300 dark:focus:ring-pink-800 shadow-lg shadow-pink-500/50 dark:shadow-lg dark:shadow-pink-800/80 rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"},"অনুসন্ধান")])],32)]),p.value.length>0?(i(),_("div",rt,[t("button",{type:"button",onClick:r[5]||(r[5]=e=>M()),class:"text-white bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-cyan-300 dark:focus:ring-cyan-800 shadow-lg shadow-cyan-500/50 dark:shadow-lg dark:shadow-cyan-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"}," তালিকা প্রিন্ট "),t("button",{type:"button",onClick:r[6]||(r[6]=e=>D()),class:"text-white bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-cyan-300 dark:focus:ring-cyan-800 shadow-lg shadow-cyan-500/50 dark:shadow-lg dark:shadow-cyan-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"}," Excel ")])):V("",!0),p.value.length>0?(i(),_("div",lt,[t("div",null,[t("h4",dt,o(a.$page.props.auth.user.word.name+" নং "+a.$page.props.auth.user.word.union.name),1)]),t("table",nt,[t("caption",st,"গ্রাম ভিত্তিক ধার্য কর ও আদায়ের টপশীট-("+o(m.value)+") - ("+o(m.value)+")",1),it,t("tbody",null,[(i(!0),_(w,null,v(p.value,(e,h)=>(i(),_("tr",{key:h},[t("td",{"data-val":a.total_num=h+1},o(e.name),9,ut),t("td",{"data-val":a.total_village+=e.village.length},o(e.village.length),9,_t),t("td",{"data-val":a.total_ekhana+=e.ekhana.length},o(e.ekhana.length),9,ct),t("td",{"data-val":a.paid_khana+=e.house_tax_paid.length},o(e.house_tax_paid.length),9,ht),t("td",{"data-val":a.total_year_levy+=u(e.house_tax)},o(u(e.house_tax)),9,pt),t("td",{"data-val":a.year_levy_paid+=d(e.house_tax_paid)},o(d(e.house_tax_paid)),9,mt),t("td",{"data-val":a.year_levy_unpaid+=u(e.house_tax_unpaid)},o(u(e.house_tax_unpaid)),9,gt),t("td",{"data-val":f+=u(e.prev_tax_unpaid)},o(u(e.prev_tax_unpaid)),9,bt),t("td",{"data-val":x+=d(e.prev_tax_paid)},o(d(e.prev_tax_paid)),9,ft),t("td",{"data-val":F+=d(e.house_tax_paid)},o(d(e.house_tax_paid)),9,xt),t("td",{"data-val":a.total_arrears+=u(e.house_tax_unpaid)},o(u(e.house_tax_unpaid)),9,yt),t("td",null,o(m.value),1),t("td",{"data-val":a.percentange+=d(e.house_tax_paid)/d(e.house_tax_paid)?d(e.house_tax_paid)/d(e.house_tax_paid)*100:100},o(d(e.house_tax_paid)/d(e.house_tax_paid)?d(e.house_tax_paid)/d(e.house_tax_paid)*100:100),9,kt)]))),128))]),t("tfoot",null,[t("tr",null,[vt,t("th",null,o(a.total_village),1),t("th",null,o(a.total_ekhana),1),t("th",null,o(a.paid_khana),1),t("th",null,o(a.total_year_levy),1),t("th",null,o(a.year_levy_paid),1),t("th",null,o(a.year_levy_unpaid),1),t("th",null,o(x)),t("th",null,o(f)),t("th",null,o(a.year_levy_paid+x),1),t("th",null,o(a.year_levy_unpaid+f),1),wt,t("th",null,o(a.percentange/a.total_num),1)])])])])):V("",!0)])]),_:1})}}};export{jt as default};
