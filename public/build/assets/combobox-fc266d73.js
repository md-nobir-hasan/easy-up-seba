import{u as k,c as Q,l as U,o as h,K as X,H as N,T as G,t as M,b as Y,N as K,p as Z,a as V}from"./AppLayout-5b660dcb.js";import{m as $,d as ee,x as te,a as I,y as oe,e as ae,f as le,b as ne,u as ue,I as ie}from"./use-tracked-pointer-c2bfe097.js";import{bp as _,aa as L,d as E,k as g,bb as f,A as W,z as q,an as z,F as re,B as se,as as ve,aQ as pe,q as A}from"./app-a783baa7.js";function de({container:o,accept:x,walk:R,enabled:y}){_(()=>{let e=o.value;if(!e||y!==void 0&&!y.value)return;let t=$(o);if(!t)return;let s=Object.assign(u=>x(u),{acceptNode:x}),S=t.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,s,!1);for(;S.nextNode();)R(S.currentNode)})}function be(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function ce(){return/Android/gi.test(window.navigator.userAgent)}function fe(){return be()||ce()}function me(o,x){return o===x}var xe=(o=>(o[o.Open=0]="Open",o[o.Closed=1]="Closed",o))(xe||{}),ge=(o=>(o[o.Single=0]="Single",o[o.Multi=1]="Multi",o))(ge||{}),Oe=(o=>(o[o.Pointer=0]="Pointer",o[o.Other=1]="Other",o))(Oe||{});let J=Symbol("ComboboxContext");function j(o){let x=ve(J,null);if(x===null){let R=new Error(`<${o} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(R,j),R}return x}let Ce=L({name:"Combobox",emits:{"update:modelValue":o=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>me},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},name:{type:String},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(o,{slots:x,attrs:R,emit:y}){let e=E(1),t=E(null),s=E(null),S=E(null),u=E(null),b=E({static:!1,hold:!1}),m=E([]),O=E(null),w=E(1),T=E(!1);function B(l=p=>p){let p=O.value!==null?m.value[O.value]:null,d=ie(l(m.value.slice()),c=>h(c.dataRef.domRef)),i=p?d.indexOf(p):null;return i===-1&&(i=null),{options:d,activeOptionIndex:i}}let a=g(()=>o.multiple?1:0),n=g(()=>o.nullable),[v,P]=ee(g(()=>o.modelValue===void 0?k(a.value,{[1]:[],[0]:void 0}):o.modelValue),l=>y("update:modelValue",l),g(()=>o.defaultValue)),r={comboboxState:e,value:v,mode:a,compare(l,p){if(typeof o.by=="string"){let d=o.by;return(l==null?void 0:l[d])===(p==null?void 0:p[d])}return o.by(l,p)},defaultValue:g(()=>o.defaultValue),nullable:n,inputRef:s,labelRef:t,buttonRef:S,optionsRef:u,disabled:g(()=>o.disabled),options:m,change(l){P(l)},activeOptionIndex:g(()=>{if(T.value&&O.value===null&&m.value.length>0){let l=m.value.findIndex(p=>!p.dataRef.disabled);if(l!==-1)return l}return O.value}),activationTrigger:w,optionsPropsRef:b,closeCombobox(){T.value=!1,!o.disabled&&e.value!==1&&(e.value=1,O.value=null)},openCombobox(){if(T.value=!0,o.disabled||e.value===0)return;let l=m.value.findIndex(p=>{let d=f(p.dataRef.value);return k(a.value,{[0]:()=>r.compare(f(r.value.value),f(d)),[1]:()=>f(r.value.value).some(i=>r.compare(f(i),f(d)))})});l!==-1&&(O.value=l),e.value=0},goToOption(l,p,d){if(T.value=!1,o.disabled||u.value&&!b.value.static&&e.value===1)return;let i=B();if(i.activeOptionIndex===null){let C=i.options.findIndex(H=>!H.dataRef.disabled);C!==-1&&(i.activeOptionIndex=C)}let c=te(l===I.Specific?{focus:I.Specific,id:p}:{focus:l},{resolveItems:()=>i.options,resolveActiveIndex:()=>i.activeOptionIndex,resolveId:C=>C.id,resolveDisabled:C=>C.dataRef.disabled});O.value=c,w.value=d??1,m.value=i.options},selectOption(l){let p=m.value.find(i=>i.id===l);if(!p)return;let{dataRef:d}=p;P(k(a.value,{[0]:()=>d.value,[1]:()=>{let i=f(r.value.value).slice(),c=f(d.value),C=i.findIndex(H=>r.compare(c,f(H)));return C===-1?i.push(c):i.splice(C,1),i}}))},selectActiveOption(){if(r.activeOptionIndex.value===null)return;let{dataRef:l,id:p}=m.value[r.activeOptionIndex.value];P(k(a.value,{[0]:()=>l.value,[1]:()=>{let d=f(r.value.value).slice(),i=f(l.value),c=d.findIndex(C=>r.compare(i,f(C)));return c===-1?d.push(i):d.splice(c,1),d}})),r.goToOption(I.Specific,p)},registerOption(l,p){let d={id:l,dataRef:p},i=B(c=>[...c,d]);if(O.value===null){let c=p.value.value;k(a.value,{[0]:()=>r.compare(f(r.value.value),f(c)),[1]:()=>f(r.value.value).some(C=>r.compare(f(C),f(c)))})&&(i.activeOptionIndex=i.options.indexOf(d))}m.value=i.options,O.value=i.activeOptionIndex,w.value=1},unregisterOption(l){var p;r.activeOptionIndex.value!==null&&((p=r.options.value[r.activeOptionIndex.value])==null?void 0:p.id)===l&&(T.value=!0);let d=B(i=>{let c=i.findIndex(C=>C.id===l);return c!==-1&&i.splice(c,1),i});m.value=d.options,O.value=d.activeOptionIndex,w.value=1}};oe([s,S,u],()=>r.closeCombobox(),g(()=>e.value===0)),pe(J,r),Q(g(()=>k(e.value,{[0]:U.Open,[1]:U.Closed})));let F=g(()=>r.activeOptionIndex.value===null?null:m.value[r.activeOptionIndex.value].dataRef.value),D=g(()=>{var l;return(l=h(s))==null?void 0:l.closest("form")});return W(()=>{q([D],()=>{if(!D.value||o.defaultValue===void 0)return;function l(){r.change(o.defaultValue)}return D.value.addEventListener("reset",l),()=>{var p;(p=D.value)==null||p.removeEventListener("reset",l)}},{immediate:!0})}),()=>{let{name:l,disabled:p,...d}=o,i={open:e.value===0,disabled:p,activeIndex:r.activeOptionIndex.value,activeOption:F.value,value:v.value};return z(re,[...l!=null&&v.value!=null?ae({[l]:v.value}).map(([c,C])=>z(le,X({features:ne.Hidden,key:c,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:c,value:C}))):[],N({theirProps:{...R,...G(d,["modelValue","defaultValue","nullable","multiple","onUpdate:modelValue","by"])},ourProps:{},slot:i,slots:x,attrs:R,name:"Combobox"})])}}});L({name:"ComboboxLabel",props:{as:{type:[Object,String],default:"label"},id:{type:String,default:()=>`headlessui-combobox-label-${M()}`}},setup(o,{attrs:x,slots:R}){let y=j("ComboboxLabel");function e(){var t;(t=h(y.inputRef))==null||t.focus({preventScroll:!0})}return()=>{let t={open:y.comboboxState.value===0,disabled:y.disabled.value},{id:s,...S}=o,u={id:s,ref:y.labelRef,onClick:e};return N({ourProps:u,theirProps:S,slot:t,attrs:x,slots:R,name:"ComboboxLabel"})}}});L({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-combobox-button-${M()}`}},setup(o,{attrs:x,slots:R,expose:y}){let e=j("ComboboxButton");y({el:e.buttonRef,$el:e.buttonRef});function t(u){e.disabled.value||(e.comboboxState.value===0?e.closeCombobox():(u.preventDefault(),e.openCombobox()),A(()=>{var b;return(b=h(e.inputRef))==null?void 0:b.focus({preventScroll:!0})}))}function s(u){switch(u.key){case V.ArrowDown:u.preventDefault(),u.stopPropagation(),e.comboboxState.value===1&&e.openCombobox(),A(()=>{var b;return(b=e.inputRef.value)==null?void 0:b.focus({preventScroll:!0})});return;case V.ArrowUp:u.preventDefault(),u.stopPropagation(),e.comboboxState.value===1&&(e.openCombobox(),A(()=>{e.value.value||e.goToOption(I.Last)})),A(()=>{var b;return(b=e.inputRef.value)==null?void 0:b.focus({preventScroll:!0})});return;case V.Escape:if(e.comboboxState.value!==0)return;u.preventDefault(),e.optionsRef.value&&!e.optionsPropsRef.value.static&&u.stopPropagation(),e.closeCombobox(),A(()=>{var b;return(b=e.inputRef.value)==null?void 0:b.focus({preventScroll:!0})});return}}let S=Y(g(()=>({as:o.as,type:x.type})),e.buttonRef);return()=>{var u,b;let m={open:e.comboboxState.value===0,disabled:e.disabled.value,value:e.value.value},{id:O,...w}=o,T={ref:e.buttonRef,id:O,type:S.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(u=h(e.optionsRef))==null?void 0:u.id,"aria-expanded":e.disabled.value?void 0:e.comboboxState.value===0,"aria-labelledby":e.labelRef.value?[(b=h(e.labelRef))==null?void 0:b.id,O].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:s,onClick:t};return N({ourProps:T,theirProps:w,slot:m,attrs:x,slots:R,name:"ComboboxButton"})}}});let he=L({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:()=>`headlessui-combobox-input-${M()}`}},emits:{change:o=>!0},setup(o,{emit:x,attrs:R,slots:y,expose:e}){let t=j("ComboboxInput"),s={value:!1};e({el:t.inputRef,$el:t.inputRef});let S=g(()=>{var a;let n=t.value.value;return h(t.inputRef)?typeof o.displayValue<"u"&&n!==void 0?(a=o.displayValue(n))!=null?a:"":typeof n=="string"?n:"":""});W(()=>{q([S,t.comboboxState],([a,n],[v,P])=>{if(s.value)return;let r=h(t.inputRef);r&&(P===0&&n===1||a!==v)&&(r.value=a)},{immediate:!0}),q([t.comboboxState],([a],[n])=>{if(a===0&&n===1){let v=h(t.inputRef);if(!v)return;let P=v.value,{selectionStart:r,selectionEnd:F,selectionDirection:D}=v;v.value="",v.value=P,D!==null?v.setSelectionRange(r,F,D):v.setSelectionRange(r,F)}})});let u=E(!1);function b(){u.value=!0}function m(){setTimeout(()=>{u.value=!1})}function O(a){switch(s.value=!0,a.key){case V.Backspace:case V.Delete:if(t.mode.value!==0||!t.nullable.value)return;let n=a.currentTarget;requestAnimationFrame(()=>{if(n.value===""){t.change(null);let v=h(t.optionsRef);v&&(v.scrollTop=0),t.goToOption(I.Nothing)}});break;case V.Enter:if(s.value=!1,t.comboboxState.value!==0||u.value)return;if(a.preventDefault(),a.stopPropagation(),t.activeOptionIndex.value===null){t.closeCombobox();return}t.selectActiveOption(),t.mode.value===0&&t.closeCombobox();break;case V.ArrowDown:return s.value=!1,a.preventDefault(),a.stopPropagation(),k(t.comboboxState.value,{[0]:()=>t.goToOption(I.Next),[1]:()=>t.openCombobox()});case V.ArrowUp:return s.value=!1,a.preventDefault(),a.stopPropagation(),k(t.comboboxState.value,{[0]:()=>t.goToOption(I.Previous),[1]:()=>{t.openCombobox(),A(()=>{t.value.value||t.goToOption(I.Last)})}});case V.Home:if(a.shiftKey)break;return s.value=!1,a.preventDefault(),a.stopPropagation(),t.goToOption(I.First);case V.PageUp:return s.value=!1,a.preventDefault(),a.stopPropagation(),t.goToOption(I.First);case V.End:if(a.shiftKey)break;return s.value=!1,a.preventDefault(),a.stopPropagation(),t.goToOption(I.Last);case V.PageDown:return s.value=!1,a.preventDefault(),a.stopPropagation(),t.goToOption(I.Last);case V.Escape:if(s.value=!1,t.comboboxState.value!==0)return;a.preventDefault(),t.optionsRef.value&&!t.optionsPropsRef.value.static&&a.stopPropagation(),t.closeCombobox();break;case V.Tab:if(s.value=!1,t.comboboxState.value!==0)return;t.mode.value===0&&t.selectActiveOption(),t.closeCombobox();break}}function w(a){t.openCombobox(),x("change",a)}function T(){s.value=!1}let B=g(()=>{var a,n,v,P;return(P=(v=(n=o.defaultValue)!=null?n:t.defaultValue.value!==void 0?(a=o.displayValue)==null?void 0:a.call(o,t.defaultValue.value):null)!=null?v:t.defaultValue.value)!=null?P:""});return()=>{var a,n,v,P,r,F;let D={open:t.comboboxState.value===0},{id:l,displayValue:p,onChange:d,...i}=o,c={"aria-controls":(a=t.optionsRef.value)==null?void 0:a.id,"aria-expanded":t.disabled.value?void 0:t.comboboxState.value===0,"aria-activedescendant":t.activeOptionIndex.value===null||(n=t.options.value[t.activeOptionIndex.value])==null?void 0:n.id,"aria-labelledby":(r=(v=h(t.labelRef))==null?void 0:v.id)!=null?r:(P=h(t.buttonRef))==null?void 0:P.id,"aria-autocomplete":"list",id:l,onCompositionstart:b,onCompositionend:m,onKeydown:O,onInput:w,onBlur:T,role:"combobox",type:(F=R.type)!=null?F:"text",tabIndex:0,ref:t.inputRef,defaultValue:B.value};return N({ourProps:c,theirProps:i,slot:D,attrs:R,slots:y,features:K.RenderStrategy|K.Static,name:"ComboboxInput"})}}}),Ie=L({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(o,{attrs:x,slots:R,expose:y}){let e=j("ComboboxOptions"),t=`headlessui-combobox-options-${M()}`;y({el:e.optionsRef,$el:e.optionsRef}),_(()=>{e.optionsPropsRef.value.static=o.static}),_(()=>{e.optionsPropsRef.value.hold=o.hold});let s=Z(),S=g(()=>s!==null?(s.value&U.Open)===U.Open:e.comboboxState.value===0);return de({container:g(()=>h(e.optionsRef)),enabled:g(()=>e.comboboxState.value===0),accept(u){return u.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:u.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(u){u.setAttribute("role","none")}}),()=>{var u,b,m;let O={open:e.comboboxState.value===0},w={"aria-labelledby":(m=(u=h(e.labelRef))==null?void 0:u.id)!=null?m:(b=h(e.buttonRef))==null?void 0:b.id,id:t,ref:e.optionsRef,role:"listbox","aria-multiselectable":e.mode.value===1?!0:void 0},T=G(o,["hold"]);return N({ourProps:w,theirProps:T,slot:O,attrs:x,slots:R,features:K.RenderStrategy|K.Static,visible:S.value,name:"ComboboxOptions"})}}}),Pe=L({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(o,{slots:x,attrs:R,expose:y}){let e=j("ComboboxOption"),t=`headlessui-combobox-option-${M()}`,s=E(null);y({el:s,$el:s});let S=g(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===t:!1),u=g(()=>k(e.mode.value,{[0]:()=>e.compare(f(e.value.value),f(o.value)),[1]:()=>f(e.value.value).some(n=>e.compare(f(n),f(o.value)))})),b=g(()=>({disabled:o.disabled,value:o.value,domRef:s}));W(()=>e.registerOption(t,b)),se(()=>e.unregisterOption(t)),_(()=>{e.comboboxState.value===0&&S.value&&e.activationTrigger.value!==0&&A(()=>{var n,v;return(v=(n=h(s))==null?void 0:n.scrollIntoView)==null?void 0:v.call(n,{block:"nearest"})})});function m(n){if(o.disabled)return n.preventDefault();e.selectOption(t),e.mode.value===0&&e.closeCombobox(),fe()||requestAnimationFrame(()=>{var v;return(v=h(e.inputRef))==null?void 0:v.focus()})}function O(){if(o.disabled)return e.goToOption(I.Nothing);e.goToOption(I.Specific,t)}let w=ue();function T(n){w.update(n)}function B(n){w.wasMoved(n)&&(o.disabled||S.value||e.goToOption(I.Specific,t,0))}function a(n){w.wasMoved(n)&&(o.disabled||S.value&&(e.optionsPropsRef.value.hold||e.goToOption(I.Nothing)))}return()=>{let{disabled:n}=o,v={active:S.value,selected:u.value,disabled:n},P={id:t,ref:s,role:"option",tabIndex:n===!0?void 0:-1,"aria-disabled":n===!0?!0:void 0,"aria-selected":u.value,disabled:void 0,onClick:m,onFocus:O,onPointerenter:T,onMouseenter:T,onPointermove:B,onMousemove:B,onPointerleave:a,onMouseleave:a};return N({ourProps:P,theirProps:o,slot:v,attrs:R,slots:x,name:"ComboboxOption"})}}});export{he as $,Ce as N,Ie as U,Pe as _};
