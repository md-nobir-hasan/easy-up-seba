import{J as D,v as U,d as F,c as W,w as X,o as d,a as t,b as M,j as G,l as H,s as Q,u as l,e as h,h as P,t as a,F as T,f as V,p as r,aX as Z}from"./app-d5236bbd.js";import{_ as tt}from"./AppLayout-16be6c30.js";import{_ as et}from"./SucMesgShow-f523cc53.js";import{p as at}from"./print-3ef36106.js";import"./ApplicationLogo-64791c0b.js";const ot={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},nt=t("div",{class:"bg-white flex justify-between p-4"},[t("h2",{class:"float-left text-4xl font-extrabold"},"ওয়ার্ড ভিত্তিক দার্য/আদায় টপশীট")],-1),lt={class:"mt-4 mb-2 p-4 bg-white"},st={class:"mt-2 flex items-center"},rt=t("label",{for:"f_year_id",class:"block min-w-[30%] text-md font-extrabold dark:text-white"},"অর্থ-বছর",-1),dt=t("option",{selected:"",value:""},"অর্থ-বছর নির্বাচন করুন",-1),ut=["value"],it={key:0},ht={key:1,id:"table"},ct={class:"bg-[#f73532c2] text-white block p-[8px] font-extrabold text-[20px] text-center h1div"},_t={id:"my-table",class:"text-center"},mt={class:"bg-[yellow] p-[8px] font-extrabold text-[20px] text-center"},pt=t("thead",null,[t("tr",null,[t("th",null,"ওয়ার্ড নাম্বার"),t("th",null,"গ্রামের সংখ্যা"),t("th",null,"খানার সংখ্যা"),t("th",null,"আদায়কৃত খানার সংখ্যা "),t("th",null,"হাল ধার্য্য কর"),t("th",null,"হাল আদায়"),t("th",null,"হাল বকেয়া"),t("th",null,"পূর্বের বকেয়া "),t("th",null,"বকেয়া আদায় "),t("th",null,"সর্বমোট আদায় "),t("th",null,"সর্বমোট বকেয়া (হাল বকেয়া + পূর্বের বকেয়া)"),t("th",null,"অর্থ-বছর"),t("th",null,"আদায়ের শতকরা হার")])],-1),xt=["data-val"],bt=["data-val"],gt=["data-val"],ft=["data-val"],yt=["data-val"],kt=["data-val"],vt=["data-val"],wt=["data-val"],Nt=["data-val"],Et=["data-val"],Ct=["data-value","data-val"],$t={key:1},Bt=t("th",null,"সর্বমোট",-1),It=t("th",null,"=>>",-1),St={key:2,class:"pt-[25px] text-center"},jt={id:"my-table",class:"text-center m-auto",style:{width:"60%"}},At=t("caption",{class:"bg-[#030b59bd] text-white p-[8px] font-extrabold text-[20px] text-center h1div"},"চলিত অর্থ-বছরের সমস্ত আদায়ের সমষ্টি",-1),Dt=t("thead",null,[t("tr",null,[t("th",null,"হাল আদায়"),t("th",null,"বকেয়া আদায়"),t("th",null,"সর্বমোট আদায় (হাল আদায় + বকেয়া আদায়)")])],-1),qt={__name:"Index",props:{f_years:Object},setup(q){D().props.auth.user;const c=U({f_year_id:""}),z=F({}),J=D().props.auth.user;D().props.permissions.forEach(function(o,n){o.module.name=="E-Khana"&&o.role_id==J.role_id&&(z.value=o)});const C=new Date;C.getMonth()+1+""+C.getDate()+C.getFullYear();const b=F({}),O=()=>{if(!c.f_year_id)return eerr.value="অর্থ-বছর নির্বাচন করুন",!1;console.log("i am form"),console.log(c),axios.post(route("ajax.ekhana.toplist.levy"),c).then(o=>{console.log(o),b.value=o.data.toplist_levy}).catch(o=>{console.error(o)}).finally(()=>{console.log("khana fetch done")})},$=F(null),Y=()=>{let o=document.getElementById("f_year_id"),n=o.selectedIndex,s=o.options[n].text;$.value=s},K=()=>{at({printable:"table",type:"html",style:"#my-table { border-collapse: collapse; width: 100%; font-size: 14px;margin-top:20px } #my-table th { background-color: #f2f2f2; color: #444; font-weight: bold; padding: 2px; text-align: left; border: 1px solid #ddd; } #my-table td { background-color: #fff; color: #444; padding: 2px; text-align: left; border: 1px solid #ddd; } #my-table tbody tr:nth-child(even) { background-color: #f2f2f2; } .h1div{font-size:40px !important; font-weight:bolder; text-align:center; margin-top:20px !important}",maxWidth:800,font:"Open Sans",honorMarginPadding:!0})},L=new Table2Excel,R=()=>{L.export(document.querySelectorAll("#my-table"))};function p(o){let n=0;return o.forEach(s=>{n+=Number(s.total_amount)}),n}function B(o){let n=0;return o.forEach(s=>{n+=Number(s.total_amount)-Number(s.paid_amount)}),n}function x(o){let n=0;return o.forEach(s=>{n+=Number(s.prev_arrears)}),n}function u(o){let n=0;return o.forEach(s=>{n+=Number(s.paid_prev_arrears)}),n}function I(o){let n=0;return o.forEach(s=>{n+=Number(s.total_amount)+Number(s.prev_arrears)}),n}function i(o){let n=0;return o.forEach(s=>{n+=Number(s.paid_amount)}),n}let y=0,k=0,v=0,w=0,_=0,g=0,f=0,m=0,S=0,j=0,N=0,E=0;return(o,n)=>{const s=Z("InputError");return d(),W(tt,{title:"দার্য/আদায় টপশীট"},{default:X(()=>[t("div",ot,[M(et,{message:o.$page.props.flash.suc_msg},null,8,["message"]),nt,t("div",lt,[t("form",{onSubmit:n[1]||(n[1]=G((...e)=>o.submit&&o.submit(...e),["prevent"])),class:"bg-[#008494db] text-[white] m-auto rounded-lg p-6 pb-[2px] text-2lg max-w-md max-sm:max-w-sm"},[t("div",st,[rt,H(t("select",{onChange:Y,id:"f_year_id","onUpdate:modelValue":n[0]||(n[0]=e=>l(c).f_year_id=e),class:"border min-w-[65%] text-[black] border-gray-300 text-md rounded-lg focus:ring-blue-500 focus:border-blue-500 block dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""},[dt,(d(!0),h(T,null,P(q.f_years,(e,A)=>(d(),h("option",{value:e.id,key:A},a(e.from+"-"+e.to),9,ut))),128))],544),[[Q,l(c).f_year_id]]),M(s,{class:"mt-2",message:l(c).errors.eerr},null,8,["message"]),M(s,{class:"mt-2",message:l(c).errors.f_year_id},null,8,["message"])]),t("div",{class:"flex items-center justify-center mt-8"},[t("button",{onClick:O,type:"submit",class:"text-white text-[18px] font-extrabold bg-gradient-to-r from-pink-400 via-pink-500 to-pink-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-pink-300 dark:focus:ring-pink-800 shadow-lg shadow-pink-500/50 dark:shadow-lg dark:shadow-pink-800/80 rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"},"অনুসন্ধান")])],32)]),b.value.length>0?(d(),h("div",it,[t("button",{type:"button",onClick:n[2]||(n[2]=e=>K()),class:"text-white bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-cyan-300 dark:focus:ring-cyan-800 shadow-lg shadow-cyan-500/50 dark:shadow-lg dark:shadow-cyan-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"}," তালিকা প্রিন্ট "),t("button",{type:"button",onClick:n[3]||(n[3]=e=>R()),class:"text-white bg-gradient-to-r from-cyan-400 via-cyan-500 to-cyan-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-cyan-300 dark:focus:ring-cyan-800 shadow-lg shadow-cyan-500/50 dark:shadow-lg dark:shadow-cyan-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"}," Excel ")])):V("",!0),b.value.length>0?(d(),h("div",ht,[t("div",null,[t("h4",ct,a(o.$page.props.auth.user.word.name+" নং "+o.$page.props.auth.user.word.union.name),1)]),t("table",_t,[t("caption",mt,"ওয়ার্ড ভিত্তিক ধার্য কর ও আদায়ের টপশীট-("+a($.value)+")",1),pt,t("tbody",null,[(d(!0),h(T,null,P(b.value,(e,A)=>(d(),h("tr",{key:A},[t("td",null,a(e.name),1),t("td",{"data-val":r(y)?y.value+=e.village.length:y+=e.village.length},a(e.village.length),9,xt),t("td",{"data-val":r(k)?k.value+=e.ekhana.length:k+=e.ekhana.length},a(e.ekhana.length),9,bt),t("td",{"data-val":r(v)?v.value+=e.house_tax_paid.length:v+=e.house_tax_paid.length},a(e.house_tax_paid.length),9,gt),t("td",{"data-val":r(w)?w.value+=p(e.house_tax):w+=p(e.house_tax)},a(p(e.house_tax)),9,ft),t("td",{"data-val":r(_)?_.value+=i(e.house_tax):_+=i(e.house_tax)},a(i(e.house_tax)),9,yt),t("td",{"data-val":r(g)?g.value+=B(e.house_tax):g+=B(e.house_tax)},a(B(e.house_tax)),9,kt),t("td",{"data-val":r(f)?f.value+=x(e.house_tax):f+=x(e.house_tax)},a(x(e.house_tax)),9,vt),t("td",{"data-val":r(m)?m.value+=u(e.house_tax):m+=u(e.house_tax)},a(u(e.house_tax)),9,wt),t("td",{"data-val":r(S)?S.value+=i(e.house_tax)+Number(u(e.house_tax)):S+=i(e.house_tax)+Number(u(e.house_tax))},a(i(e.house_tax)+Number(u(e.house_tax))),9,Nt),t("td",{"data-val":r(j)?j.value+=I(e.house_tax):j+=I(e.house_tax)},a(I(e.house_tax)),9,Et),t("td",null,a($.value),1),t("td",null,[e.house_tax.length?(d(),h("span",{key:0,"data-value":r(E)?E.value+=1:E+=1,"data-val":r(N)?N.value+=Number(i(e.house_tax)+Number(u(e.house_tax)))/(Number(p(e.house_tax))+Number(x(e.house_tax))):N+=Number(i(e.house_tax)+Number(u(e.house_tax)))/(Number(p(e.house_tax))+Number(x(e.house_tax)))},a(Number(i(e.house_tax)+Number(u(e.house_tax)))/(Number(p(e.house_tax))+Number(x(e.house_tax)))*100),9,Ct)):(d(),h("span",$t,"0"))])]))),128))]),t("tfoot",null,[t("tr",null,[Bt,t("th",null,a(l(y)),1),t("th",null,a(l(k)),1),t("th",null,a(l(v)),1),t("th",null,a(l(w)),1),t("th",null,a(l(_)),1),t("th",null,a(l(g)),1),t("th",null,a(l(m)),1),t("th",null,a(l(f)),1),t("th",null,a(l(_)+l(m)),1),t("th",null,a(l(g)+l(f)),1),It,t("th",null,a(l(N)/l(E)*100),1)])])])])):V("",!0),b.value.length>0?(d(),h("div",St,[t("table",jt,[At,Dt,t("tbody",null,[t("tr",null,[t("td",null,a(l(_)),1),t("td",null,a(l(m)),1),t("td",null,a(l(_)+l(m)),1)])])])])):V("",!0)])]),_:1})}}};export{qt as default};
